{
  "db_name": "PostgreSQL",
  "query": "\n            WITH RECURSIVE descendant_chain AS (\n                -- Base case: start with the given warehouse\n                SELECT warehouse_id, 0 as depth\n                FROM warehouses\n                WHERE tenant_id = $1 AND warehouse_id = $2 AND deleted_at IS NULL\n\n                UNION ALL\n\n                -- Recursive case: get children\n                SELECT w.warehouse_id, dc.depth + 1\n                FROM warehouses w\n                INNER JOIN descendant_chain dc ON w.parent_warehouse_id = dc.warehouse_id\n                WHERE w.tenant_id = $1 AND w.deleted_at IS NULL\n            )\n            SELECT warehouse_id\n            FROM descendant_chain\n            WHERE depth > 0  -- Exclude the original warehouse, only return descendants\n            ",
  "describe": {
    "columns": [
      {
        "ordinal": 0,
        "name": "warehouse_id",
        "type_info": "Uuid"
      }
    ],
    "parameters": {
      "Left": [
        "Uuid",
        "Uuid"
      ]
    },
    "nullable": [
      null
    ]
  },
  "hash": "30c23b90758bbf13b2195f88bf12a48d9aebe5b7c5ce23c1c9b1e948e02e1129"
}
