openapi: 3.1.0
info:
  title: Inventory Service API
  description: Multi-tenant inventory management and warehouse operations service
  contact:
    name: Anthill Team
    email: team@example.com
  license:
    name: MIT
  version: 0.1.0
servers:
- url: http://localhost:8001
  description: Local development server
paths:
  /api/v1/inventory/categories/:
    get:
      tags:
      - categories
      summary: GET /api/v1/inventory/categories - List categories with pagination and filtering
      description: |-
        Retrieves a paginated list of categories with optional filtering and sorting.
        Supports hierarchical filtering by parent category, level, and search terms.
        Results are sorted by display order by default.

        # Authentication
        Requires authenticated user with appropriate tenant access

        # Query Parameters
        * `parent_id` - Filter by parent category (optional)
        * `level` - Filter by category level (0=root, optional)
        * `is_active` - Filter by active status (optional)
        * `is_visible` - Filter by visibility (optional)
        * `search` - Search in name and description (optional)
        * `page` - Page number (default: 1, min: 1)
        * `page_size` - Items per page (default: 20, max: 100)
        * `sort_by` - Sort field (default: display_order)
        * `sort_dir` - Sort direction (default: asc)

        # Returns
        * `200` - Paginated list of categories with metadata
        * `400` - Invalid query parameters
        * `401` - Authentication required
        * `403` - Insufficient permissions

        # Example
        ```
        GET /api/v1/inventory/categories?page=1&page_size=10&is_active=true
        ```
      operationId: list_categories
      parameters:
      - name: parent_id
        in: query
        description: Filter by parent category (None for root categories only)
        required: false
        schema:
          type:
          - string
          - 'null'
          format: uuid
      - name: level
        in: query
        description: Filter by level (0 for root, 1 for first level, etc.)
        required: false
        schema:
          type:
          - integer
          - 'null'
          format: int32
      - name: is_active
        in: query
        description: Filter by active status
        required: false
        schema:
          type:
          - boolean
          - 'null'
      - name: is_visible
        in: query
        description: Filter by visibility
        required: false
        schema:
          type:
          - boolean
          - 'null'
      - name: search
        in: query
        description: Search term (searches name and description)
        required: false
        schema:
          type:
          - string
          - 'null'
      - name: page
        in: query
        description: Page number (1-based)
        required: false
        schema:
          type: integer
          format: int32
          minimum: 0
      - name: page_size
        in: query
        description: Page size
        required: false
        schema:
          type: integer
          format: int32
          minimum: 0
      - name: sort_by
        in: query
        description: Sort field
        required: false
        schema:
          $ref: '#/components/schemas/CategorySortField'
      - name: sort_dir
        in: query
        description: Sort direction
        required: false
        schema:
          $ref: '#/components/schemas/SortDirection'
      responses:
        '200':
          description: Paginated list of categories
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CategoryListResponse'
        '400':
          description: Invalid query parameters
        '401':
          description: Authentication required
        '403':
          description: Insufficient permissions
      security:
      - bearer_auth: []
    post:
      tags:
      - categories
      summary: POST /api/v1/inventory/categories - Create a new category
      description: |-
        Creates a new product category with the provided details. The category will be
        automatically assigned a path and level based on its parent category (if any).
        Product counts are initialized to zero and will be updated by database triggers.

        # Authentication
        Requires authenticated user with appropriate tenant access

        # Parameters
        * `request` - Category creation data including name, parent, display settings

        # Returns
        * `200` - Category created successfully with full category details
        * `400` - Invalid request data or validation errors
        * `401` - Authentication required
        * `403` - Insufficient permissions
        * `409` - Category code or slug already exists

        # Example
        ```json
        POST /api/v1/inventory/categories
        {
          "name": "Electronics",
          "description": "Electronic devices and accessories",
          "code": "ELEC",
          "display_order": 1,
          "is_active": true
        }
        ```
      operationId: create_category
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CategoryCreateRequest'
        required: true
      responses:
        '200':
          description: Category created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CategoryResponse'
        '400':
          description: Invalid request data
        '401':
          description: Authentication required
        '403':
          description: Insufficient permissions
        '409':
          description: Category code or slug already exists
      security:
      - bearer_auth: []
  /api/v1/inventory/categories/{category_id}:
    get:
      tags:
      - categories
      summary: GET /api/v1/inventory/categories/{category_id} - Get category by ID
      description: |-
        Retrieves a single category by its unique identifier within the tenant.
        Includes all category details and computed fields like path and level.

        # Authentication
        Requires authenticated user with appropriate tenant access

        # Path Parameters
        * `category_id` - UUID of the category to retrieve

        # Returns
        * `200` - Category details
        * `401` - Authentication required
        * `403` - Insufficient permissions
        * `404` - Category not found or belongs to different tenant

        # Example
        ```
        GET /api/v1/inventory/categories/123e4567-e89b-12d3-a456-426614174000
        ```
      operationId: get_category
      parameters:
      - name: category_id
        in: path
        description: UUID of the category to retrieve
        required: true
        schema:
          type: string
          format: uuid
      responses:
        '200':
          description: Category details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CategoryResponse'
        '401':
          description: Authentication required
        '403':
          description: Insufficient permissions
        '404':
          description: Category not found
      security:
      - bearer_auth: []
    put:
      tags:
      - categories
      summary: PUT /api/v1/inventory/categories/{category_id} - Update category
      description: |-
        Updates an existing category with the provided fields. Only specified fields
        will be updated. If the parent category changes, the path and level will
        be automatically recalculated.

        # Authentication
        Requires authenticated user with appropriate tenant access

        # Path Parameters
        * `category_id` - UUID of the category to update

        # Parameters
        * `request` - Fields to update (all optional)

        # Returns
        * `200` - Updated category details
        * `400` - Invalid request data
        * `401` - Authentication required
        * `403` - Insufficient permissions
        * `404` - Category not found
        * `409` - Updated code or slug conflicts with existing category

        # Example
        ```json
        PUT /api/v1/inventory/categories/123e4567-e89b-12d3-a456-426614174000
        {
          "name": "Updated Electronics",
          "is_active": false
        }
        ```
      operationId: update_category
      parameters:
      - name: category_id
        in: path
        description: UUID of the category to update
        required: true
        schema:
          type: string
          format: uuid
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CategoryUpdateRequest'
        required: true
      responses:
        '200':
          description: Updated category details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CategoryResponse'
        '400':
          description: Invalid request data
        '401':
          description: Authentication required
        '403':
          description: Insufficient permissions
        '404':
          description: Category not found
        '409':
          description: Updated code or slug conflicts with existing category
      security:
      - bearer_auth: []
    delete:
      tags:
      - categories
      summary: DELETE /api/v1/inventory/categories/{category_id} - Soft delete category
      description: |-
        Marks a category as deleted (soft delete). The category will no longer
        appear in normal queries but can be restored if needed. Child categories
        and associated products are not affected.

        # Authentication
        Requires authenticated user with appropriate tenant access

        # Path Parameters
        * `category_id` - UUID of the category to delete

        # Returns
        * `204` - Category deleted successfully
        * `401` - Authentication required
        * `403` - Insufficient permissions
        * `404` - Category not found
        * `409` - Category cannot be deleted (has children or products)

        # Example
        ```
        DELETE /api/v1/inventory/categories/123e4567-e89b-12d3-a456-426614174000
        ```
      operationId: delete_category
      parameters:
      - name: category_id
        in: path
        description: UUID of the category to delete
        required: true
        schema:
          type: string
          format: uuid
      responses:
        '204':
          description: Category deleted successfully
        '401':
          description: Authentication required
        '403':
          description: Insufficient permissions
        '404':
          description: Category not found
        '409':
          description: Category cannot be deleted
      security:
      - bearer_auth: []
  /api/v1/inventory/lot-serials:
    post:
      tags:
      - lot-serial
      operationId: create_lot_serial
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateLotSerialRequest'
        required: true
      responses:
        '201':
          description: Lot serial created successfully
        '400':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
      security:
      - bearer_auth: []
  /api/v1/inventory/lot-serials/products/{product_id}:
    get:
      tags:
      - lot-serial
      operationId: list_lot_serials_by_product
      parameters:
      - name: product_id
        in: path
        description: Product ID
        required: true
        schema:
          type: string
          format: uuid
      - name: tracking_type
        in: query
        required: false
        schema:
          oneOf:
          - type: 'null'
          - $ref: '#/components/schemas/LotSerialTrackingType'
      - name: status
        in: query
        required: false
        schema:
          oneOf:
          - type: 'null'
          - $ref: '#/components/schemas/LotSerialStatus'
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/LotSerial'
        '401':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
      security:
      - bearer_auth: []
  /api/v1/inventory/lot-serials/quarantine-expired:
    post:
      tags:
      - lot-serial
      operationId: quarantine_expired_lots
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/QuarantineResponse'
        '401':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
      security:
      - bearer_auth: []
  /api/v1/inventory/lot-serials/tracking/{lot_serial_id}:
    get:
      tags:
      - lot-serial
      operationId: get_lot_serial_lifecycle
      parameters:
      - name: lot_serial_id
        in: path
        description: Lot serial ID
        required: true
        schema:
          type: string
          format: uuid
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LotSerialLifecycle'
        '401':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
      security:
      - bearer_auth: []
  /api/v1/inventory/lot-serials/{lot_serial_id}:
    get:
      tags:
      - lot-serial
      operationId: get_lot_serial
      parameters:
      - name: lot_serial_id
        in: path
        description: Lot serial ID
        required: true
        schema:
          type: string
          format: uuid
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                oneOf:
                - type: 'null'
                - $ref: '#/components/schemas/LotSerial'
        '401':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
      security:
      - bearer_auth: []
    put:
      tags:
      - lot-serial
      operationId: update_lot_serial
      parameters:
      - name: lot_serial_id
        in: path
        description: Lot serial ID
        required: true
        schema:
          type: string
          format: uuid
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/LotSerial'
        required: true
      responses:
        '200':
          description: Lot serial updated successfully
        '400':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
      security:
      - bearer_auth: []
    delete:
      tags:
      - lot-serial
      operationId: delete_lot_serial
      parameters:
      - name: lot_serial_id
        in: path
        description: Lot serial ID
        required: true
        schema:
          type: string
          format: uuid
      responses:
        '204':
          description: Lot serial deleted successfully
        '401':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
      security:
      - bearer_auth: []
  /api/v1/inventory/products/:
    get:
      tags:
      - products
      summary: GET /api/v1/inventory/products - List products with pagination and filtering
      description: |-
        Retrieves a paginated list of products with optional filtering and sorting.
        Supports filtering by product type, active status, sellable status, and search terms.
        Results are sorted by name by default.

        # Authentication
        Requires authenticated user with appropriate tenant access

        # Query Parameters
        * `product_type` - Filter by product type (optional)
        * `is_active` - Filter by active status (optional)
        * `is_sellable` - Filter by sellable status (optional)
        * `is_purchaseable` - Filter by purchaseable status (optional)
        * `search` - Search in name, SKU, and description (optional)
        * `page` - Page number (default: 1, min: 1)
        * `page_size` - Items per page (default: 20, max: 100)
        * `sort_by` - Sort field (default: name)
        * `sort_dir` - Sort direction (default: asc)

        # Returns
        * `200` - Paginated list of products with metadata
        * `400` - Invalid query parameters
        * `401` - Authentication required
        * `403` - Insufficient permissions

        # Example
        ```
        GET /api/v1/inventory/products?page=1&page_size=10&is_active=true&product_type=goods
        ```
      operationId: list_products
      parameters:
      - name: productType
        in: query
        description: Filter by product type
        required: false
        schema:
          type:
          - string
          - 'null'
      - name: isActive
        in: query
        description: Filter by active status
        required: false
        schema:
          type:
          - boolean
          - 'null'
      - name: isSellable
        in: query
        description: Filter by sellable status
        required: false
        schema:
          type:
          - boolean
          - 'null'
      - name: isPurchaseable
        in: query
        description: Filter by purchaseable status
        required: false
        schema:
          type:
          - boolean
          - 'null'
      - name: search
        in: query
        description: Search in name, SKU, and description
        required: false
        schema:
          type:
          - string
          - 'null'
      - name: page
        in: query
        description: Page number (1-based)
        required: false
        schema:
          type: integer
          format: int64
      - name: pageSize
        in: query
        description: Items per page
        required: false
        schema:
          type: integer
          format: int64
      - name: sortBy
        in: query
        description: Sort field
        required: false
        schema:
          type: string
      - name: sortDir
        in: query
        description: Sort direction
        required: false
        schema:
          type: string
      responses:
        '200':
          description: Paginated list of products
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProductListResponse'
        '400':
          description: Invalid query parameters
        '401':
          description: Authentication required
        '403':
          description: Insufficient permissions
      security:
      - bearer_auth: []
    post:
      tags:
      - products
      summary: POST /api/v1/inventory/products - Create a new product
      description: |-
        Creates a new product with the provided details. The product will be
        automatically assigned a UUID v7 and validated according to business rules.

        # Authentication
        Requires authenticated user with appropriate tenant access

        # Parameters
        * `request` - Product creation data including SKU, name, type, pricing

        # Returns
        * `201` - Product created successfully with full product details
        * `400` - Invalid request data or validation errors
        * `401` - Authentication required
        * `403` - Insufficient permissions
        * `409` - Product SKU already exists

        # Example
        ```json
        POST /api/v1/inventory/products
        {
          "sku": "WIDGET-001",
          "name": "Blue Widget",
          "description": "A high-quality blue widget",
          "productType": "goods",
          "trackInventory": true,
          "trackingMethod": "none",
          "salePrice": 1999,
          "costPrice": 999,
          "currencyCode": "USD",
          "isActive": true,
          "isSellable": true,
          "isPurchaseable": true
        }
        ```
      operationId: create_product
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ProductCreateRequest'
        required: true
      responses:
        '201':
          description: Product created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProductResponse'
        '400':
          description: Invalid request data
        '401':
          description: Authentication required
        '403':
          description: Insufficient permissions
        '409':
          description: Product SKU already exists
      security:
      - bearer_auth: []
  /api/v1/inventory/products/{product_id}:
    get:
      tags:
      - products
      summary: GET /api/v1/inventory/products/{product_id} - Get product by ID
      description: |-
        Retrieves a single product by its unique identifier within the tenant.
        Includes all product details and computed fields.

        # Authentication
        Requires authenticated user with appropriate tenant access

        # Path Parameters
        * `product_id` - UUID of the product to retrieve

        # Returns
        * `200` - Product details
        * `401` - Authentication required
        * `403` - Insufficient permissions
        * `404` - Product not found or belongs to different tenant

        # Example
        ```
        GET /api/v1/inventory/products/123e4567-e89b-12d3-a456-426614174000
        ```
      operationId: get_product
      parameters:
      - name: product_id
        in: path
        description: UUID of the product to retrieve
        required: true
        schema:
          type: string
          format: uuid
      responses:
        '200':
          description: Product details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProductResponse'
        '401':
          description: Authentication required
        '403':
          description: Insufficient permissions
        '404':
          description: Product not found
      security:
      - bearer_auth: []
    put:
      tags:
      - products
      summary: PUT /api/v1/inventory/products/{product_id} - Update product
      description: |-
        Updates an existing product with the provided fields. Only specified fields
        will be updated. SKU uniqueness is enforced within the tenant.

        # Authentication
        Requires authenticated user with appropriate tenant access

        # Path Parameters
        * `product_id` - UUID of the product to update

        # Parameters
        * `request` - Fields to update (all optional)

        # Returns
        * `200` - Updated product details
        * `400` - Invalid request data
        * `401` - Authentication required
        * `403` - Insufficient permissions
        * `404` - Product not found
        * `409` - Updated SKU conflicts with existing product

        # Example
        ```json
        PUT /api/v1/inventory/products/123e4567-e89b-12d3-a456-426614174000
        {
          "name": "Updated Widget Name",
          "salePrice": 2499,
          "isActive": false
        }
        ```
      operationId: update_product
      parameters:
      - name: product_id
        in: path
        description: UUID of the product to update
        required: true
        schema:
          type: string
          format: uuid
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ProductUpdateRequest'
        required: true
      responses:
        '200':
          description: Updated product details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProductResponse'
        '400':
          description: Invalid request data
        '401':
          description: Authentication required
        '403':
          description: Insufficient permissions
        '404':
          description: Product not found
        '409':
          description: Updated SKU conflicts with existing product
      security:
      - bearer_auth: []
    delete:
      tags:
      - products
      summary: DELETE /api/v1/inventory/products/{product_id} - Soft delete product
      description: |-
        Marks a product as deleted (soft delete). The product will no longer
        appear in normal queries but can be restored if needed. Associated
        inventory records are not affected.

        # Authentication
        Requires authenticated user with appropriate tenant access

        # Path Parameters
        * `product_id` - UUID of the product to delete

        # Returns
        * `204` - Product deleted successfully
        * `401` - Authentication required
        * `403` - Insufficient permissions
        * `404` - Product not found
        * `409` - Product cannot be deleted (has active inventory transactions)

        # Example
        ```
        DELETE /api/v1/inventory/products/123e4567-e89b-12d3-a456-426614174000
        ```
      operationId: delete_product
      parameters:
      - name: product_id
        in: path
        description: UUID of the product to delete
        required: true
        schema:
          type: string
          format: uuid
      responses:
        '204':
          description: Product deleted successfully
        '401':
          description: Authentication required
        '403':
          description: Insufficient permissions
        '404':
          description: Product not found
        '409':
          description: Product cannot be deleted
      security:
      - bearer_auth: []
  /api/v1/inventory/quality/points:
    get:
      tags:
      - quality
      summary: List quality control points
      operationId: list_qc_points
      parameters:
      - name: product_id
        in: query
        required: false
        schema:
          type:
          - string
          - 'null'
          format: uuid
      - name: warehouse_id
        in: query
        required: false
        schema:
          type:
          - string
          - 'null'
          format: uuid
      - name: active_only
        in: query
        required: false
        schema:
          type:
          - boolean
          - 'null'
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/QualityControlPoint'
        '401':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
      security:
      - bearer_auth: []
    post:
      tags:
      - quality
      summary: Create a new quality control point
      operationId: create_qc_point
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateQualityControlPoint'
        required: true
      responses:
        '201':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/QualityControlPoint'
        '400':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
      security:
      - bearer_auth: []
  /api/v1/inventory/quality/points/{qc_point_id}:
    get:
      tags:
      - quality
      summary: Get a quality control point by ID
      operationId: get_qc_point
      parameters:
      - name: qc_point_id
        in: path
        description: Quality control point ID
        required: true
        schema:
          type: string
          format: uuid
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/QualityControlPoint'
        '401':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
      security:
      - bearer_auth: []
    put:
      tags:
      - quality
      summary: Update a quality control point
      operationId: update_qc_point
      parameters:
      - name: qc_point_id
        in: path
        description: Quality control point ID
        required: true
        schema:
          type: string
          format: uuid
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateQualityControlPoint'
        required: true
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/QualityControlPoint'
        '400':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
      security:
      - bearer_auth: []
    delete:
      tags:
      - quality
      summary: Delete (deactivate) a quality control point
      operationId: delete_qc_point
      parameters:
      - name: qc_point_id
        in: path
        description: Quality control point ID
        required: true
        schema:
          type: string
          format: uuid
      responses:
        '204':
          description: Quality control point deactivated
        '401':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
      security:
      - bearer_auth: []
  /api/v1/inventory/receipts:
    get:
      tags:
      - receipts
      summary: GET /api/v1/inventory/receipts - List Goods Receipt Notes with pagination and filtering
      description: |-
        Retrieves a paginated list of GRNs with optional filtering by warehouse,
        supplier, status, and search terms. Results are ordered by creation date (newest first).

        # Authentication
        Requires authenticated user with appropriate tenant access

        # Query Parameters
        * `warehouse_id` - Filter by warehouse UUID (optional)
        * `supplier_id` - Filter by supplier UUID (optional)
        * `status` - Filter by receipt status (draft/confirmed/partially_received/received/cancelled, optional)
        * `search` - Search in receipt number or reference number (optional)
        * `created_after` - Filter receipts created after this date (optional)
        * `created_before` - Filter receipts created before this date (optional)
        * `page` - Page number (default: 1, min: 1)
        * `page_size` - Items per page (default: 20, max: 100)

        # Returns
        * `200` - Paginated list of receipts with summary information
        * `400` - Invalid query parameters
        * `401` - Authentication required
        * `403` - Insufficient permissions

        # Example
        ```
        GET /api/v1/inventory/receipts?page=1&page_size=10&warehouse_id=550e8400-e29b-41d4-a716-446655440000&status=received
        ```
      operationId: list_receipts
      parameters:
      - name: page
        in: query
        description: Page number (1-based)
        required: false
        schema:
          type: integer
          format: int32
          minimum: 0
      - name: page_size
        in: query
        description: Items per page
        required: false
        schema:
          type: integer
          format: int32
          minimum: 0
      - name: warehouse_id
        in: query
        description: Filter by warehouse
        required: false
        schema:
          type:
          - string
          - 'null'
          format: uuid
      - name: supplier_id
        in: query
        description: Filter by supplier
        required: false
        schema:
          type:
          - string
          - 'null'
          format: uuid
      - name: status
        in: query
        description: Filter by status
        required: false
        schema:
          type:
          - string
          - 'null'
      - name: search
        in: query
        description: Filter by receipt number or reference number
        required: false
        schema:
          type:
          - string
          - 'null'
      - name: created_after
        in: query
        description: Filter receipts created after this date
        required: false
        schema:
          type:
          - string
          - 'null'
          format: date-time
      - name: created_before
        in: query
        description: Filter receipts created before this date
        required: false
        schema:
          type:
          - string
          - 'null'
          format: date-time
      responses:
        '200':
          description: Paginated list of receipts
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ReceiptListResponse'
        '400':
          description: Invalid query parameters
        '401':
          description: Authentication required
        '403':
          description: Insufficient permissions
      security:
      - bearer_auth: []
    post:
      tags:
      - receipts
      summary: POST /api/v1/inventory/receipts - Create a new Goods Receipt Note
      description: |-
        Creates a new GRN with the provided receipt data and line items.
        The operation includes validation and stock movement creation.
        Event publishing will be added when the outbox pattern is implemented.

        # Authentication
        Requires authenticated user with appropriate tenant access

        # Idempotency
        Supports idempotent operations via service-generated key from request payload

        # Parameters
        * `request` - Receipt creation data including warehouse, supplier, and line items

        # Returns
        * `201` - Receipt created successfully with full receipt details
        * `400` - Invalid request data or validation errors
        * `401` - Authentication required
        * `403` - Insufficient permissions
        * `409` - Receipt already exists (idempotency)

        # Example
        ```json
        POST /api/v1/inventory/receipts
        {
          "warehouse_id": "550e8400-e29b-41d4-a716-446655440000",
          "supplier_id": "550e8400-e29b-41d4-a716-446655440001",
          "reference_number": "PO-12345",
          "expected_delivery_date": "2025-11-20T10:00:00Z",
          "notes": "Urgent delivery for production line",
          "items": [
            {
              "product_id": "550e8400-e29b-41d4-a716-446655440002",
              "expected_quantity": 100,
              "received_quantity": 95,
              "unit_cost": 1500,
              "uom_id": "550e8400-e29b-41d4-a716-446655440003",
              "lot_number": "LOT-2025-001",
              "notes": "Slightly damaged packaging"
            }
          ]
        }
        ```
      operationId: create_receipt
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ReceiptCreateRequest'
        required: true
      responses:
        '201':
          description: Receipt created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ReceiptResponse'
        '400':
          description: Invalid request data
        '401':
          description: Authentication required
        '403':
          description: Insufficient permissions
      security:
      - bearer_auth: []
  /api/v1/inventory/receipts/{receipt_id}:
    get:
      tags:
      - receipts
      summary: GET /api/v1/inventory/receipts/{receipt_id} - Get Goods Receipt Note by ID
      description: |-
        Retrieves a single GRN by its unique identifier with full details including
        all line items, quantities, costs, and metadata.

        # Authentication
        Requires authenticated user with appropriate tenant access

        # Path Parameters
        * `receipt_id` - UUID of the receipt to retrieve

        # Returns
        * `200` - Complete receipt details with all line items
        * `401` - Authentication required
        * `403` - Insufficient permissions
        * `404` - Receipt not found or belongs to different tenant

        # Example
        ```
        GET /api/v1/inventory/receipts/550e8400-e29b-41d4-a716-446655440000
        ```

        Response includes:
        ```json
        {
          "receipt_id": "550e8400-e29b-41d4-a716-446655440000",
          "receipt_number": "GRN-2025-00001",
          "warehouse_id": "550e8400-e29b-41d4-a716-446655440001",
          "status": "confirmed",
          "total_quantity": 95,
          "total_value": 142500,
          "items": [
            {
              "receipt_item_id": "550e8400-e29b-41d4-a716-446655440002",
              "product_id": "550e8400-e29b-41d4-a716-446655440003",
              "received_quantity": 95,
              "unit_cost": 1500,
              "line_total": 142500,
              "lot_number": "LOT-2025-001"
            }
          ]
        }
        ```
      operationId: get_receipt
      parameters:
      - name: receipt_id
        in: path
        description: UUID of the receipt to retrieve
        required: true
        schema:
          type: string
          format: uuid
      responses:
        '200':
          description: Complete receipt details with all line items
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ReceiptResponse'
        '401':
          description: Authentication required
        '403':
          description: Insufficient permissions
        '404':
          description: Receipt not found
      security:
      - bearer_auth: []
  /api/v1/inventory/receipts/{receipt_id}/validate:
    post:
      tags:
      - receipts
      summary: POST /api/v1/inventory/receipts/{receipt_id}/validate - Validate and complete a Goods Receipt Note
      description: |-
        Validates and completes a GRN, changing its status to 'received' and updating
        inventory valuation layers. This action confirms the receipt of goods and makes
        them available in stock for further operations.

        # Authentication
        Requires authenticated user with appropriate tenant access

        # Path Parameters
        * `receipt_id` - UUID of the receipt to validate

        # Returns
        * `200` - Receipt successfully validated with updated details
        * `400` - Receipt is not in a valid state for validation
        * `401` - Authentication required
        * `403` - Insufficient permissions
        * `404` - Receipt not found

        # Example
        ```
        POST /api/v1/inventory/receipts/550e8400-e29b-41d4-a716-446655440000/validate
        ```

        Response includes the updated receipt with status 'received'.
      operationId: validate_receipt
      parameters:
      - name: receipt_id
        in: path
        description: UUID of the receipt to validate
        required: true
        schema:
          type: string
          format: uuid
      responses:
        '200':
          description: Receipt successfully validated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ReceiptResponse'
        '400':
          description: Receipt is not in a valid state for validation
        '401':
          description: Authentication required
        '403':
          description: Insufficient permissions
        '404':
          description: Receipt not found
      security:
      - bearer_auth: []
  /api/v1/inventory/reconciliations:
    get:
      tags:
      - reconciliations
      summary: GET /api/v1/inventory/reconciliations - List reconciliations
      description: |-
        Returns a paginated list of reconciliations with optional filtering.

        # Authentication
        Requires authenticated user with appropriate tenant access

        # Query Parameters
        * `warehouse_id` - Filter by warehouse (optional)
        * `status` - Filter by status (optional)
        * `cycle_type` - Filter by cycle type (optional)
        * `page` - Page number (optional, default 1)
        * `limit` - Items per page (optional, default 50, max 100)

        # Returns
        * `200` - List retrieved successfully
        * `401` - Authentication required
        * `403` - Insufficient permissions

        # Example Response
        ```json
        {
          "reconciliations": [...],
          "pagination": {
            "page": 1,
            "limit": 50,
            "total": 25,
            "total_pages": 1
          }
        }
        ```
      operationId: list_reconciliations
      parameters:
      - name: warehouse_id
        in: query
        description: Filter by warehouse
        required: false
        schema:
          type:
          - string
          - 'null'
          format: uuid
      - name: status
        in: query
        description: Filter by status
        required: false
        schema:
          oneOf:
          - type: 'null'
          - $ref: '#/components/schemas/ReconciliationStatus'
      - name: cycle_type
        in: query
        description: Filter by cycle type
        required: false
        schema:
          oneOf:
          - type: 'null'
          - $ref: '#/components/schemas/CycleType'
      - name: page
        in: query
        description: Page number (1-based)
        required: false
        schema:
          type:
          - integer
          - 'null'
          format: int32
          minimum: 0
      - name: limit
        in: query
        description: Items per page
        required: false
        schema:
          type:
          - integer
          - 'null'
          format: int32
          minimum: 0
      responses:
        '200':
          description: List retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ReconciliationListResponse'
        '401':
          description: Authentication required
        '403':
          description: Insufficient permissions
    post:
      tags:
      - reconciliations
      summary: POST /api/v1/inventory/reconciliations - Start reconciliation
      description: |-
        Creates a new reconciliation session and populates it with items based on the cycle counting strategy.

        # Authentication
        Requires authenticated user with appropriate tenant access

        # Request Body
        ```json
        {
          "name": "Monthly Warehouse Count",
          "description": "Full inventory reconciliation for main warehouse",
          "cycle_type": "Full",
          "warehouse_id": "550e8400-e29b-41d4-a716-446655440000",
          "notes": "Scheduled monthly count"
        }
        ```

        # Returns
        * `201` - Reconciliation created successfully
        * `400` - Invalid request data
        * `401` - Authentication required
        * `403` - Insufficient permissions

        # Business Rules
        - Creates reconciliation in 'Draft' status
        - Populates items based on cycle counting strategy
        - Supports ABC analysis, location-based, and random sampling

        # Example Response
        ```json
        {
          "reconciliation": {
            "reconciliation_id": "550e8400-e29b-41d4-a716-446655440001",
            "reconciliation_number": "REC-20241127-0001",
            "name": "Monthly Warehouse Count",
            "status": "Draft",
            "cycle_type": "Full",
            "total_items": 150,
            "created_by": "550e8400-e29b-41d4-a716-446655440002",
            "created_at": "2024-11-27T10:00:00Z"
          }
        }
        ```
      operationId: create_reconciliation
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateReconciliationRequest'
        required: true
      responses:
        '201':
          description: Reconciliation created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CreateReconciliationResponse'
        '400':
          description: Invalid request
        '401':
          description: Authentication required
        '403':
          description: Insufficient permissions
  /api/v1/inventory/reconciliations/analytics:
    get:
      tags:
      - reconciliations
      summary: GET /api/v1/inventory/reconciliations/analytics - Get reconciliation analytics
      description: |-
        Returns analytics and metrics for reconciliations.

        # Authentication
        Requires authenticated user with appropriate tenant access

        # Query Parameters
        * `warehouse_id` - Filter by warehouse (optional)

        # Returns
        * `200` - Analytics retrieved successfully
        * `401` - Authentication required
        * `403` - Insufficient permissions

        # Example Response
        ```json
        {
          "total_reconciliations": 25,
          "completed_reconciliations": 23,
          "average_variance_percentage": -2.5,
          "total_variance_value": -1250.00,
          "high_variance_items": 5,
          "accuracy_rate": 92.0
        }
        ```
      operationId: get_reconciliation_analytics
      parameters:
      - name: warehouse_id
        in: query
        description: Warehouse ID filter
        required: false
        schema:
          type:
          - string
          - 'null'
          format: uuid
      responses:
        '200':
          description: Analytics retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ReconciliationAnalyticsResponse'
        '401':
          description: Authentication required
        '403':
          description: Insufficient permissions
  /api/v1/inventory/reconciliations/{reconciliation_id}:
    get:
      tags:
      - reconciliations
      summary: GET /api/v1/inventory/reconciliations/{reconciliation_id} - Get reconciliation details
      description: |-
        Returns a reconciliation with all its items.

        # Authentication
        Requires authenticated user with appropriate tenant access

        # Path Parameters
        * `reconciliation_id` - UUID of the reconciliation

        # Returns
        * `200` - Details retrieved successfully
        * `401` - Authentication required
        * `403` - Insufficient permissions
        * `404` - Reconciliation not found

        # Example Response
        ```json
        {
          "reconciliation": {...},
          "items": [...]
        }
        ```
      operationId: get_reconciliation
      parameters:
      - name: reconciliation_id
        in: path
        description: Reconciliation ID
        required: true
        schema:
          type: string
          format: uuid
      responses:
        '200':
          description: Details retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ReconciliationDetailResponse'
        '401':
          description: Authentication required
        '403':
          description: Insufficient permissions
        '404':
          description: Reconciliation not found
  /api/v1/inventory/reconciliations/{reconciliation_id}/approve:
    post:
      tags:
      - reconciliations
      summary: POST /api/v1/inventory/reconciliations/{reconciliation_id}/approve - Approve reconciliation
      description: |-
        Approves a completed reconciliation, making adjustments permanent.

        # Authentication
        Requires authenticated user with appropriate tenant access

        # Path Parameters
        * `reconciliation_id` - UUID of the reconciliation

        # Request Body
        ```json
        {
          "notes": "Approved after review of variances"
        }
        ```

        # Returns
        * `200` - Reconciliation approved successfully
        * `400` - Invalid request or business rule violations
        * `401` - Authentication required
        * `403` - Insufficient permissions
        * `404` - Reconciliation not found

        # Business Rules
        - Reconciliation must be in Completed status
        - Requires approval permissions for large variances
        - Records approval timestamp and approver

        # Example Response
        ```json
        {
          "reconciliation": {
            "reconciliation_id": "550e8400-e29b-41d4-a716-446655440001",
            "status": "Completed",
            "approved_by": "550e8400-e29b-41d4-a716-446655440007",
            "approved_at": "2024-11-27T11:30:00Z",
            "notes": "Approved after review of variances"
          }
        }
        ```
      operationId: approve_reconciliation
      parameters:
      - name: reconciliation_id
        in: path
        description: Reconciliation ID
        required: true
        schema:
          type: string
          format: uuid
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ApproveReconciliationRequest'
        required: true
      responses:
        '200':
          description: Reconciliation approved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApproveReconciliationResponse'
        '400':
          description: Invalid request or business rule violation
        '401':
          description: Authentication required
        '403':
          description: Insufficient permissions
        '404':
          description: Reconciliation not found
  /api/v1/inventory/reconciliations/{reconciliation_id}/count:
    post:
      tags:
      - reconciliations
      summary: POST /api/v1/inventory/reconciliations/{reconciliation_id}/count - Record counts
      description: |-
        Records counted quantities for reconciliation items and updates variance calculations.

        # Authentication
        Requires authenticated user with appropriate tenant access

        # Path Parameters
        * `reconciliation_id` - UUID of the reconciliation

        # Request Body
        ```json
        {
          "items": [
            {
              "product_id": "550e8400-e29b-41d4-a716-446655440003",
              "warehouse_id": "550e8400-e29b-41d4-a716-446655440000",
              "location_id": "550e8400-e29b-41d4-a716-446655440004",
              "counted_quantity": 95,
              "unit_cost": 25.50,
              "notes": "Counted twice for accuracy"
            }
          ]
        }
        ```

        # Returns
        * `200` - Counts recorded successfully
        * `400` - Invalid request or business rule violations
        * `401` - Authentication required
        * `403` - Insufficient permissions
        * `404` - Reconciliation not found

        # Business Rules
        - Reconciliation must be in Draft or InProgress status
        - Updates status to InProgress if it was Draft
        - Calculates variances and variance percentages automatically
        - Tracks who counted each item and when

        # Example Response
        ```json
        {
          "items": [
            {
              "tenant_id": "550e8400-e29b-41d4-a716-446655440005",
              "reconciliation_id": "550e8400-e29b-41d4-a716-446655440001",
              "product_id": "550e8400-e29b-41d4-a716-446655440003",
              "warehouse_id": "550e8400-e29b-41d4-a716-446655440000",
              "expected_quantity": 100,
              "counted_quantity": 95,
              "variance": -5,
              "variance_percentage": -5.0,
              "unit_cost": 25.50,
              "variance_value": -127.50,
              "counted_by": "550e8400-e29b-41d4-a716-446655440002",
              "counted_at": "2024-11-27T10:15:00Z",
              "notes": "Counted twice for accuracy"
            }
          ]
        }
        ```
      operationId: count_reconciliation
      parameters:
      - name: reconciliation_id
        in: path
        description: Reconciliation ID
        required: true
        schema:
          type: string
          format: uuid
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CountReconciliationRequest'
        required: true
      responses:
        '200':
          description: Counts recorded successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CountReconciliationResponse'
        '400':
          description: Invalid request or business rule violation
        '401':
          description: Authentication required
        '403':
          description: Insufficient permissions
        '404':
          description: Reconciliation not found
  /api/v1/inventory/reconciliations/{reconciliation_id}/finalize:
    post:
      tags:
      - reconciliations
      summary: POST /api/v1/inventory/reconciliations/{reconciliation_id}/finalize - Finalize reconciliation
      description: |-
        Completes the reconciliation, calculates final variances, and creates automatic adjustments.

        # Authentication
        Requires authenticated user with appropriate tenant access

        # Path Parameters
        * `reconciliation_id` - UUID of the reconciliation

        # Returns
        * `200` - Reconciliation finalized successfully
        * `400` - Invalid request or business rule violations
        * `401` - Authentication required
        * `403` - Insufficient permissions
        * `404` - Reconciliation not found

        # Business Rules
        - Reconciliation must be in InProgress status
        - All items must have counted quantities
        - Creates stock adjustments for discrepancies
        - Updates inventory levels
        - Sets status to Completed

        # Example Response
        ```json
        {
          "reconciliation": {
            "reconciliation_id": "550e8400-e29b-41d4-a716-446655440001",
            "status": "Completed",
            "completed_at": "2024-11-27T11:00:00Z",
            "total_variance": -25
          },
          "adjustments": [
            {
              "adjustment_id": "550e8400-e29b-41d4-a716-446655440006",
              "product_id": "550e8400-e29b-41d4-a716-446655440003",
              "warehouse_id": "550e8400-e29b-41d4-a716-446655440000",
              "quantity": -5,
              "reason": "Reconciliation discrepancy",
              "adjusted_at": "2024-11-27T11:00:00Z"
            }
          ]
        }
        ```
      operationId: finalize_reconciliation
      parameters:
      - name: reconciliation_id
        in: path
        description: Reconciliation ID
        required: true
        schema:
          type: string
          format: uuid
      responses:
        '200':
          description: Reconciliation finalized successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FinalizeReconciliationResponse'
        '400':
          description: Invalid request or business rule violation
        '401':
          description: Authentication required
        '403':
          description: Insufficient permissions
        '404':
          description: Reconciliation not found
  /api/v1/inventory/reconciliations/{reconciliation_id}/scan:
    post:
      tags:
      - reconciliations
      summary: POST /api/v1/inventory/reconciliations/{reconciliation_id}/scan - Scan barcode for counting
      description: |-
        Scans a barcode to update reconciliation count for the corresponding product.
        Supports mobile counting workflows with barcode scanners.

        # Authentication
        Requires authenticated user with appropriate tenant access

        # Path Parameters
        * `reconciliation_id` - UUID of the reconciliation

        # Request Body
        ```json
        {
          "barcode": "123e4567-e89b-12d3-a456-426614174000",
          "quantity": 50,
          "location_id": "123e4567-e89b-12d3-a456-426614174001",
          "notes": "Counted from shelf A"
        }
        ```

        # Returns
        * `200` - Barcode scanned successfully
        * `400` - Invalid barcode or request
        * `401` - Authentication required
        * `403` - Insufficient permissions
        * `404` - Reconciliation or product not found

        # Example Response
        ```json
        {
          "item": {
            "reconciliation_item_id": "123e4567-e89b-12d3-a456-426614174002",
            "product_id": "123e4567-e89b-12d3-a456-426614174000",
            "expected_quantity": 45,
            "counted_quantity": 50,
            "variance": 5,
            "counted_at": "2025-11-27T20:00:00Z"
          },
          "is_new_count": true
        }
        ```
      operationId: scan_barcode
      parameters:
      - name: reconciliation_id
        in: path
        description: Reconciliation ID
        required: true
        schema:
          type: string
          format: uuid
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ScanBarcodeRequest'
        required: true
      responses:
        '200':
          description: Barcode scanned successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ScanBarcodeResponse'
        '400':
          description: Invalid barcode or request
        '401':
          description: Authentication required
        '403':
          description: Insufficient permissions
        '404':
          description: Reconciliation or product not found
  /api/v1/inventory/reconciliations/{reconciliation_id}/variance:
    get:
      tags:
      - reconciliations
      summary: GET /api/v1/inventory/reconciliations/{reconciliation_id}/variance - Get variance analysis
      description: |-
        Returns detailed variance analysis for a specific reconciliation.

        # Authentication
        Requires authenticated user with appropriate tenant access

        # Path Parameters
        * `reconciliation_id` - UUID of the reconciliation

        # Returns
        * `200` - Variance analysis retrieved successfully
        * `401` - Authentication required
        * `403` - Insufficient permissions
        * `404` - Reconciliation not found

        # Example Response
        ```json
        {
          "reconciliation": {...},
          "variance_ranges": [
            {"range": "0-5%", "count": 120, "total_variance_value": -250.00},
            {"range": "5-10%", "count": 15, "total_variance_value": -180.00}
          ],
          "top_variance_items": [...]
        }
        ```
      operationId: get_variance_analysis
      parameters:
      - name: reconciliation_id
        in: path
        description: Reconciliation ID
        required: true
        schema:
          type: string
          format: uuid
      responses:
        '200':
          description: Variance analysis retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/VarianceAnalysisResponse'
        '401':
          description: Authentication required
        '403':
          description: Insufficient permissions
        '404':
          description: Reconciliation not found
  /api/v1/inventory/replenishment/check:
    post:
      tags:
      - replenishment
      summary: Run replenishment check for all active rules
      operationId: run_replenishment_check
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/ReplenishmentCheckResult'
        '401':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
      security:
      - bearer_auth: []
  /api/v1/inventory/replenishment/check/product/{product_id}:
    post:
      tags:
      - replenishment
      summary: Run replenishment check for a specific product
      operationId: check_product_replenishment
      parameters:
      - name: product_id
        in: path
        description: Product ID
        required: true
        schema:
          type: string
          format: uuid
      - name: warehouse_id
        in: query
        description: Warehouse ID
        required: false
        schema:
          type: string
          format: uuid
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ReplenishmentCheckResult'
        '401':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
      security:
      - bearer_auth: []
  /api/v1/inventory/replenishment/rules:
    post:
      tags:
      - replenishment
      summary: Create a new reorder rule
      operationId: create_reorder_rule
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateReorderRule'
        required: true
      responses:
        '201':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ReorderRule'
        '400':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
      security:
      - bearer_auth: []
  /api/v1/inventory/replenishment/rules/product/{product_id}:
    get:
      tags:
      - replenishment
      summary: List reorder rules for a product
      operationId: list_reorder_rules_for_product
      parameters:
      - name: product_id
        in: path
        description: Product ID
        required: true
        schema:
          type: string
          format: uuid
      - name: warehouse_id
        in: query
        description: Warehouse ID filter
        required: false
        schema:
          type: string
          format: uuid
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/ReorderRule'
        '401':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
      security:
      - bearer_auth: []
  /api/v1/inventory/replenishment/rules/{rule_id}:
    get:
      tags:
      - replenishment
      summary: Get a reorder rule by ID
      operationId: get_reorder_rule
      parameters:
      - name: rule_id
        in: path
        description: Reorder rule ID
        required: true
        schema:
          type: string
          format: uuid
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ReorderRule'
        '401':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
      security:
      - bearer_auth: []
    put:
      tags:
      - replenishment
      summary: Update a reorder rule
      operationId: update_reorder_rule
      parameters:
      - name: rule_id
        in: path
        description: Reorder rule ID
        required: true
        schema:
          type: string
          format: uuid
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateReorderRule'
        required: true
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ReorderRule'
        '401':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
      security:
      - bearer_auth: []
    delete:
      tags:
      - replenishment
      summary: Delete a reorder rule
      operationId: delete_reorder_rule
      parameters:
      - name: rule_id
        in: path
        description: Reorder rule ID
        required: true
        schema:
          type: string
          format: uuid
      responses:
        '204':
          description: Rule deleted
        '401':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
      security:
      - bearer_auth: []
  /api/v1/inventory/reports/aging:
    get:
      tags:
      - reports
      operationId: get_stock_aging
      parameters:
      - name: warehouse_id
        in: query
        description: Warehouse ID to filter by location
        required: false
        schema:
          type: string
          format: uuid
      responses:
        '200':
          description: Stock aging report
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/StockAgingEntry'
        '401':
          description: Unauthorized
        '500':
          description: Internal server error
      security:
      - bearer_auth: []
  /api/v1/inventory/reports/dead-stock:
    get:
      tags:
      - reports
      operationId: get_dead_stock
      parameters:
      - name: days_threshold
        in: query
        description: 'Days threshold for dead stock (default: 90)'
        required: false
        schema:
          type: integer
          format: int32
      - name: warehouse_id
        in: query
        description: Warehouse ID to filter by location
        required: false
        schema:
          type: string
          format: uuid
      responses:
        '200':
          description: Dead stock report
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/DeadStockEntry'
        '401':
          description: Unauthorized
        '500':
          description: Internal server error
      security:
      - bearer_auth: []
  /api/v1/inventory/reports/low-stock:
    get:
      tags:
      - reports
      operationId: get_low_stock
      parameters:
      - name: warehouse_id
        in: query
        description: Warehouse ID to filter by location
        required: false
        schema:
          type: string
          format: uuid
      responses:
        '200':
          description: Low stock report
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/LowStockEntry'
        '401':
          description: Unauthorized
        '500':
          description: Internal server error
      security:
      - bearer_auth: []
  /api/v1/inventory/reports/stock-ledger:
    get:
      tags:
      - reports
      operationId: get_stock_ledger
      parameters:
      - name: product_id
        in: query
        description: Product ID to filter the ledger
        required: true
        schema:
          type: string
          format: uuid
      - name: warehouse_id
        in: query
        description: Warehouse ID to filter by location
        required: false
        schema:
          type: string
          format: uuid
      - name: date_from
        in: query
        description: Start date for filtering
        required: false
        schema:
          type: string
          format: date-time
      - name: date_to
        in: query
        description: End date for filtering
        required: false
        schema:
          type: string
          format: date-time
      responses:
        '200':
          description: Stock ledger report
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/StockLedgerEntry'
        '400':
          description: Invalid query parameters
        '401':
          description: Unauthorized
        '500':
          description: Internal server error
      security:
      - bearer_auth: []
  /api/v1/inventory/reports/turnover:
    get:
      tags:
      - reports
      operationId: get_inventory_turnover
      parameters:
      - name: period
        in: query
        description: 'Reporting period in days (default: 90, e.g., ''30'', ''90'')'
        required: true
        schema:
          type: string
      responses:
        '200':
          description: Inventory turnover report
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/InventoryTurnoverEntry'
        '401':
          description: Unauthorized
        '500':
          description: Internal server error
      security:
      - bearer_auth: []
  /api/v1/inventory/rma:
    post:
      tags:
      - rma
      summary: POST /api/v1/inventory/rma - Create a new RMA request
      operationId: create_rma
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateRmaRequest'
        required: true
      responses:
        '201':
          description: RMA created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CreateRmaResponse'
        '400':
          description: Invalid request
        '401':
          description: Authentication required
        '403':
          description: Insufficient permissions
  /api/v1/inventory/rma/{rma_id}/approve:
    post:
      tags:
      - rma
      summary: POST /api/v1/inventory/rma/{rma_id}/approve - Approve or reject an RMA request
      operationId: approve_rma
      parameters:
      - name: rma_id
        in: path
        description: RMA ID
        required: true
        schema:
          type: string
          format: uuid
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ApproveRmaRequest'
        required: true
      responses:
        '200':
          description: RMA approved/rejected successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApproveRmaResponse'
        '400':
          description: Invalid request
        '401':
          description: Authentication required
        '403':
          description: Insufficient permissions
        '404':
          description: RMA not found
  /api/v1/inventory/rma/{rma_id}/receive:
    post:
      tags:
      - rma
      summary: POST /api/v1/inventory/rma/{rma_id}/receive - Process the receipt of returned goods
      operationId: receive_rma
      parameters:
      - name: rma_id
        in: path
        description: RMA ID
        required: true
        schema:
          type: string
          format: uuid
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ReceiveRmaRequest'
        required: true
      responses:
        '200':
          description: RMA received successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ReceiveRmaResponse'
        '400':
          description: Invalid request
        '401':
          description: Authentication required
        '403':
          description: Insufficient permissions
        '404':
          description: RMA not found
  /api/v1/inventory/transfers:
    post:
      tags:
      - transfers
      summary: POST /api/v1/inventory/transfers - Create a new stock transfer
      description: |-
        Creates a stock transfer in draft status with the specified items.
        The transfer will be assigned an auto-generated transfer number.

        # Authentication
        Requires authenticated user with appropriate tenant access

        # Request Body
        ```json
        {
          "reference_number": "REF123",
          "source_warehouse_id": "550e8400-e29b-41d4-a716-446655440000",
          "destination_warehouse_id": "550e8400-e29b-41d4-a716-446655440001",
          "transfer_type": "manual",
          "priority": "normal",
          "expected_ship_date": "2023-10-15T10:00:00Z",
          "expected_receive_date": "2023-10-16T10:00:00Z",
          "shipping_method": "truck",
          "notes": "Urgent transfer for high-demand product",
          "reason": "Stock replenishment",
          "items": [
            {
              "product_id": "550e8400-e29b-41d4-a716-446655440002",
              "quantity": 100,
              "uom_id": "550e8400-e29b-41d4-a716-446655440003",
              "unit_cost": 5000,
              "line_number": 1,
              "notes": "Fragile item"
            }
          ]
        }
        ```

        # Returns
        * `201` - Transfer created successfully
        * `400` - Invalid request data or business rule violations
        * `401` - Authentication required
        * `403` - Insufficient permissions

        # Business Rules
        - Source and destination warehouses must be different
        - Quantities must be positive
        - Transfer is created in 'draft' status
        - Product and UOM existence is validated by database constraints

        # Example Response
        ```json
        {
          "transfer_id": "550e8400-e29b-41d4-a716-446655440004",
          "transfer_number": "ST-2023-00001",
          "status": "draft",
          "items_count": 1
        }
        ```
      operationId: create_transfer
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateTransferRequest'
        required: true
      responses:
        '201':
          description: Transfer created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CreateTransferResponse'
        '400':
          description: Invalid request or business rule violation
        '401':
          description: Authentication required
        '403':
          description: Insufficient permissions
  /api/v1/inventory/transfers/{transfer_id}/confirm:
    post:
      tags:
      - transfers
      summary: POST /api/v1/inventory/transfers/{transfer_id}/confirm - Confirm a stock transfer
      description: |-
        Confirms a draft transfer, moves inventory to transit location, and updates
        the transfer status to 'confirmed'. This initiates the physical transfer process.

        # Authentication
        Requires authenticated user with appropriate tenant access

        # Path Parameters
        * `transfer_id` - UUID of the transfer to confirm

        # Request Body
        ```json
        {
          "notes": "Confirmed and ready for picking"
        }
        ```

        # Returns
        * `200` - Transfer confirmed successfully
        * `400` - Invalid request or business rule violations
        * `401` - Authentication required
        * `403` - Insufficient permissions
        * `404` - Transfer not found

        # Business Rules
        - Transfer must be in 'draft' status
        - Creates stock moves for inventory tracking
        - Updates inventory levels (decrements source warehouse)
        - Sets approved_by and approved_at timestamps

        # Example Response
        ```json
        {
          "transfer_id": "550e8400-e29b-41d4-a716-446655440004",
          "status": "confirmed",
          "confirmed_at": "2023-10-15T09:30:00Z"
        }
        ```
      operationId: confirm_transfer
      parameters:
      - name: transfer_id
        in: path
        description: Transfer ID
        required: true
        schema:
          type: string
          format: uuid
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ConfirmTransferRequest'
        required: true
      responses:
        '200':
          description: Transfer confirmed successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ConfirmTransferResponse'
        '400':
          description: Invalid request or business rule violation
        '401':
          description: Authentication required
        '403':
          description: Insufficient permissions
        '404':
          description: Transfer not found
  /api/v1/inventory/transfers/{transfer_id}/receive:
    post:
      tags:
      - transfers
      summary: POST /api/v1/inventory/transfers/{transfer_id}/receive - Receive a stock transfer
      description: |-
        Receives a shipped transfer at the destination warehouse, moves inventory
        to the destination location, and completes the transfer process.

        # Authentication
        Requires authenticated user with appropriate tenant access

        # Path Parameters
        * `transfer_id` - UUID of the transfer to receive

        # Request Body
        ```json
        {
          "notes": "Received in good condition"
        }
        ```

        # Returns
        * `200` - Transfer received successfully
        * `400` - Invalid request or business rule violations
        * `401` - Authentication required
        * `403` - Insufficient permissions
        * `404` - Transfer not found

        # Business Rules
        - Transfer must be in 'shipped' status
        - Creates stock moves for inventory tracking
        - Updates inventory levels (increments destination warehouse)
        - Will publish inventory.transfer.completed event (planned for future implementation)
        - Sets actual_receive_date timestamp

        # Example Response
        ```json
        {
          "transfer_id": "550e8400-e29b-41d4-a716-446655440004",
          "status": "received",
          "received_at": "2023-10-16T14:00:00Z",
          "stock_moves_created": 2
        }
        ```
      operationId: receive_transfer
      parameters:
      - name: transfer_id
        in: path
        description: Transfer ID
        required: true
        schema:
          type: string
          format: uuid
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ReceiveTransferRequest'
        required: true
      responses:
        '200':
          description: Transfer received successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ReceiveTransferResponse'
        '400':
          description: Invalid request or business rule violation
        '401':
          description: Authentication required
        '403':
          description: Insufficient permissions
        '404':
          description: Transfer not found
  /api/v1/inventory/valuation/{product_id}:
    get:
      tags:
      - valuation
      summary: GET /api/v1/inventory/valuation/{product_id} - Get current valuation for a product
      description: |-
        Returns the current inventory valuation for a specific product.
        The valuation includes current quantity, value, and cost based on the
        product's valuation method (FIFO, AVCO, or Standard).

        # Authentication
        Requires authenticated user with appropriate tenant access

        # Path Parameters
        * `product_id` - Product UUID

        # Returns
        * `200` - Current valuation data
        * `404` - Product or valuation not found
        * `401` - Authentication required
        * `403` - Insufficient permissions
      operationId: get_valuation
      parameters:
      - name: product_id
        in: path
        description: Product ID
        required: true
        schema:
          type: string
          format: uuid
      responses:
        '200':
          description: Current valuation data
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ValuationDto'
        '401':
          description: Authentication required
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Insufficient permissions
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Product or valuation not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
      security:
      - bearer_auth: []
  /api/v1/inventory/valuation/{product_id}/adjust:
    post:
      tags:
      - valuation
      summary: POST /api/v1/inventory/valuation/{product_id}/adjust - Adjust inventory cost
      description: |-
        Performs a cost adjustment to the inventory valuation.
        This can be used for write-offs, revaluations, or corrections.

        # Authentication
        Requires authenticated user with appropriate tenant access

        # Path Parameters
        * `product_id` - Product UUID

        # Request Body
        ```json
        {
          "adjustment_amount": -5000,  // Adjustment in cents (can be negative)
          "reason": "Damaged goods write-off"
        }
        ```

        # Returns
        * `200` - Updated valuation data
        * `400` - Invalid adjustment amount
        * `404` - Product not found
        * `401` - Authentication required
        * `403` - Insufficient permissions
      operationId: adjust_cost
      parameters:
      - name: product_id
        in: path
        description: Product ID
        required: true
        schema:
          type: string
          format: uuid
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CostAdjustmentPayload'
        required: true
      responses:
        '200':
          description: Updated valuation data
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ValuationDto'
        '400':
          description: Invalid adjustment amount
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Authentication required
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Insufficient permissions
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Product not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
      security:
      - bearer_auth: []
  /api/v1/inventory/valuation/{product_id}/history:
    get:
      tags:
      - valuation
      summary: GET /api/v1/inventory/valuation/{product_id}/history - Get valuation history
      description: |-
        Returns the historical changes to a product's valuation.
        Useful for auditing and financial reporting.

        # Authentication
        Requires authenticated user with appropriate tenant access

        # Path Parameters
        * `product_id` - Product UUID

        # Query Parameters
        * `limit` - Maximum number of records (default: 50, max: 100)
        * `offset` - Number of records to skip (default: 0)

        # Returns
        * `200` - Historical valuation records with pagination
        * `404` - Product not found
        * `401` - Authentication required
        * `403` - Insufficient permissions
      operationId: get_valuation_history
      parameters:
      - name: product_id
        in: path
        description: Product ID
        required: true
        schema:
          type: string
          format: uuid
      - name: limit
        in: query
        required: false
        schema:
          type:
          - integer
          - 'null'
          format: int64
      - name: offset
        in: query
        required: false
        schema:
          type:
          - integer
          - 'null'
          format: int64
      responses:
        '200':
          description: Historical valuation records with pagination
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ValuationHistoryResponse'
        '401':
          description: Authentication required
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Insufficient permissions
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Product not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
      security:
      - bearer_auth: []
  /api/v1/inventory/valuation/{product_id}/layers:
    get:
      tags:
      - valuation
      summary: GET /api/v1/inventory/valuation/{product_id}/layers - Get valuation layers for FIFO
      description: |-
        Returns the active cost layers for products using FIFO valuation.
        Layers represent different cost levels for remaining inventory.

        # Authentication
        Requires authenticated user with appropriate tenant access

        # Path Parameters
        * `product_id` - Product UUID

        # Returns
        * `200` - List of active cost layers
        * `404` - Product not found or doesn't use FIFO
        * `401` - Authentication required
        * `403` - Insufficient permissions
      operationId: get_valuation_layers
      parameters:
      - name: product_id
        in: path
        description: Product ID
        required: true
        schema:
          type: string
          format: uuid
      responses:
        '200':
          description: List of active cost layers
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ValuationLayersResponse'
        '401':
          description: Authentication required
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Insufficient permissions
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Product not found or doesn't use FIFO
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
      security:
      - bearer_auth: []
  /api/v1/inventory/valuation/{product_id}/method:
    put:
      tags:
      - valuation
      summary: PUT /api/v1/inventory/valuation/{product_id}/method - Set valuation method for a product
      description: |-
        Changes the valuation method for a product. This affects how inventory
        costs are calculated and tracked.

        # Authentication
        Requires authenticated user with appropriate tenant access

        # Path Parameters
        * `product_id` - Product UUID

        # Request Body
        ```json
        {
          "valuation_method": "fifo" | "avco" | "standard"
        }
        ```

        # Returns
        * `200` - Updated valuation data
        * `400` - Invalid valuation method
        * `404` - Product not found
        * `401` - Authentication required
        * `403` - Insufficient permissions
      operationId: set_valuation_method
      parameters:
      - name: product_id
        in: path
        description: Product ID
        required: true
        schema:
          type: string
          format: uuid
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SetValuationMethodPayload'
        required: true
      responses:
        '200':
          description: Updated valuation data
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ValuationDto'
        '400':
          description: Invalid valuation method
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Authentication required
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Insufficient permissions
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Product not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
      security:
      - bearer_auth: []
  /api/v1/inventory/valuation/{product_id}/revalue:
    post:
      tags:
      - valuation
      summary: POST /api/v1/inventory/valuation/{product_id}/revalue - Revalue inventory
      description: |-
        Revalues the entire inventory at a new cost basis.
        This changes the cost of existing inventory without affecting quantity.

        # Authentication
        Requires authenticated user with appropriate tenant access

        # Path Parameters
        * `product_id` - Product UUID

        # Request Body
        ```json
        {
          "new_unit_cost": 12000,  // New cost per unit in cents
          "reason": "Market price adjustment"
        }
        ```

        # Returns
        * `200` - Updated valuation data
        * `400` - Invalid cost
        * `404` - Product not found
        * `401` - Authentication required
        * `403` - Insufficient permissions
      operationId: revalue_inventory
      parameters:
      - name: product_id
        in: path
        description: Product ID
        required: true
        schema:
          type: string
          format: uuid
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RevaluationPayload'
        required: true
      responses:
        '200':
          description: Updated valuation data
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ValuationDto'
        '400':
          description: Invalid cost
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Authentication required
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Insufficient permissions
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Product not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
      security:
      - bearer_auth: []
  /api/v1/inventory/valuation/{product_id}/standard-cost:
    put:
      tags:
      - valuation
      summary: PUT /api/v1/inventory/valuation/{product_id}/standard-cost - Set standard cost for a product
      description: |-
        Sets the standard cost for products using Standard costing method.
        Only applicable when the product uses standard valuation.

        # Authentication
        Requires authenticated user with appropriate tenant access

        # Path Parameters
        * `product_id` - Product UUID

        # Request Body
        ```json
        {
          "standard_cost": 15000  // Cost in cents
        }
        ```

        # Returns
        * `200` - Updated valuation data
        * `400` - Invalid cost or product doesn't use standard costing
        * `404` - Product not found
        * `401` - Authentication required
        * `403` - Insufficient permissions
      operationId: set_standard_cost
      parameters:
      - name: product_id
        in: path
        description: Product ID
        required: true
        schema:
          type: string
          format: uuid
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SetStandardCostPayload'
        required: true
      responses:
        '200':
          description: Updated valuation data
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ValuationDto'
        '400':
          description: Invalid cost or product doesn't use standard costing
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Authentication required
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Insufficient permissions
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Product not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
      security:
      - bearer_auth: []
  /api/v1/inventory/warehouses:
    get:
      tags:
      - warehouses
      summary: Get all warehouses
      operationId: get_warehouses
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/WarehouseResponse'
        '401':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
      security:
      - bearer_auth: []
    post:
      tags:
      - warehouses
      summary: Create a new warehouse
      operationId: create_warehouse
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateWarehouseRequest'
        required: true
      responses:
        '201':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WarehouseResponse'
        '400':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
      security:
      - bearer_auth: []
  /api/v1/inventory/warehouses/{id}:
    get:
      tags:
      - warehouses
      summary: Get warehouse by ID
      operationId: get_warehouse
      parameters:
      - name: id
        in: path
        description: Warehouse ID
        required: true
        schema:
          type: string
          format: uuid
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WarehouseResponse'
        '401':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
      security:
      - bearer_auth: []
    put:
      tags:
      - warehouses
      summary: Update warehouse
      operationId: update_warehouse
      parameters:
      - name: id
        in: path
        description: Warehouse ID
        required: true
        schema:
          type: string
          format: uuid
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateWarehouseRequest'
        required: true
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WarehouseResponse'
        '400':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
      security:
      - bearer_auth: []
    delete:
      tags:
      - warehouses
      summary: Delete warehouse
      operationId: delete_warehouse
      parameters:
      - name: id
        in: path
        description: Warehouse ID
        required: true
        schema:
          type: string
          format: uuid
      responses:
        '204':
          description: Warehouse deleted successfully
        '401':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
      security:
      - bearer_auth: []
  /api/v1/inventory/warehouses/{warehouse_id}/locations:
    post:
      tags:
      - warehouses
      summary: Create a new location in a warehouse
      operationId: create_warehouse_location
      parameters:
      - name: warehouse_id
        in: path
        description: Warehouse ID
        required: true
        schema:
          type: string
          format: uuid
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateWarehouseLocationRequest'
        required: true
      responses:
        '201':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WarehouseLocationResponse'
        '400':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
      security:
      - bearer_auth: []
  /api/v1/inventory/warehouses/{warehouse_id}/zones:
    post:
      tags:
      - warehouses
      summary: Create a new zone in a warehouse
      operationId: create_warehouse_zone
      parameters:
      - name: warehouse_id
        in: path
        description: Warehouse ID
        required: true
        schema:
          type: string
          format: uuid
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateWarehouseZoneRequest'
        required: true
      responses:
        '201':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WarehouseZoneResponse'
        '400':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
      security:
      - bearer_auth: []
  /api/v1/warehouse/picking/confirm:
    post:
      tags:
      - picking
      summary: POST /api/v1/warehouse/picking/confirm - Confirm picking plan execution
      operationId: confirm_picking_plan
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ConfirmPickingPlanRequest'
        required: true
      responses:
        '200':
          description: Picking plan confirmed
        '400':
          description: Invalid request data
        '401':
          description: Unauthorized
        '500':
          description: Internal server error
      security:
      - bearer_auth: []
  /api/v1/warehouse/picking/methods:
    get:
      tags:
      - picking
      summary: GET /api/v1/warehouse/picking/methods - List picking methods for warehouse
      operationId: list_picking_methods
      parameters:
      - name: warehouse_id
        in: query
        description: Warehouse ID to filter methods
        required: true
        schema:
          type: string
          format: uuid
      responses:
        '200':
          description: List of picking methods
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/PickingMethodResponse'
        '401':
          description: Unauthorized
        '500':
          description: Internal server error
      security:
      - bearer_auth: []
    post:
      tags:
      - picking
      summary: POST /api/v1/warehouse/picking/methods - Create a new picking method
      operationId: create_picking_method
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreatePickingMethodRequest'
        required: true
      responses:
        '201':
          description: Picking method created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PickingMethodResponse'
        '400':
          description: Invalid request data
        '401':
          description: Unauthorized
        '500':
          description: Internal server error
      security:
      - bearer_auth: []
  /api/v1/warehouse/picking/methods/{method_id}:
    get:
      tags:
      - picking
      summary: GET /api/v1/warehouse/picking/methods/{method_id} - Get picking method by ID
      operationId: get_picking_method
      parameters:
      - name: method_id
        in: path
        description: Picking method ID
        required: true
        schema:
          type: string
          format: uuid
      responses:
        '200':
          description: Picking method found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PickingMethodResponse'
        '401':
          description: Unauthorized
        '404':
          description: Picking method not found
        '500':
          description: Internal server error
      security:
      - bearer_auth: []
    put:
      tags:
      - picking
      summary: PUT /api/v1/warehouse/picking/methods/{method_id} - Update picking method
      operationId: update_picking_method
      parameters:
      - name: method_id
        in: path
        description: Picking method ID
        required: true
        schema:
          type: string
          format: uuid
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdatePickingMethodRequest'
        required: true
      responses:
        '200':
          description: Picking method updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PickingMethodResponse'
        '401':
          description: Unauthorized
        '404':
          description: Picking method not found
        '500':
          description: Internal server error
      security:
      - bearer_auth: []
    delete:
      tags:
      - picking
      summary: DELETE /api/v1/warehouse/picking/methods/{method_id} - Delete picking method
      operationId: delete_picking_method
      parameters:
      - name: method_id
        in: path
        description: Picking method ID
        required: true
        schema:
          type: string
          format: uuid
      responses:
        '204':
          description: Picking method deleted
        '401':
          description: Unauthorized
        '404':
          description: Picking method not found
        '500':
          description: Internal server error
      security:
      - bearer_auth: []
  /api/v1/warehouse/picking/methods/{method_id}/default:
    put:
      tags:
      - picking
      summary: PUT /api/v1/warehouse/picking/methods/{method_id}/default - Set as default method
      operationId: set_default_method
      parameters:
      - name: method_id
        in: path
        description: Picking method ID
        required: true
        schema:
          type: string
          format: uuid
      responses:
        '200':
          description: Default method set
        '401':
          description: Unauthorized
        '404':
          description: Picking method not found
        '500':
          description: Internal server error
      security:
      - bearer_auth: []
  /api/v1/warehouse/picking/optimize:
    post:
      tags:
      - picking
      summary: POST /api/v1/warehouse/picking/optimize - Generate optimized picking plan
      operationId: optimize_picking
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PickingOptimizationRequest'
        required: true
      responses:
        '200':
          description: Picking plan generated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PickingPlanResponse'
        '400':
          description: Invalid request data
        '401':
          description: Unauthorized
        '500':
          description: Internal server error
      security:
      - bearer_auth: []
  /api/v1/warehouse/putaway/confirm:
    post:
      tags:
      - putaway
      summary: POST /api/v1/warehouse/putaway/confirm - Confirm putaway and create stock moves
      description: |-
        Confirms the putaway of goods to specified locations, creating the necessary
        stock moves and updating location inventory levels.

        # Authentication
        Requires authenticated user with appropriate tenant access

        # Parameters
        * `request` - Putaway confirmation with allocations and reference information

        # Returns
        * `200` - Putaway confirmed with created stock moves
        * `400` - Invalid allocations or capacity exceeded
        * `401` - Authentication required
        * `403` - Insufficient permissions
        * `404` - Location not found

        # Example
        ```json
        POST /api/v1/warehouse/putaway/confirm
        {
          "allocations": [
            {
              "location_id": "550e8400-e29b-41d4-a716-446655440002",
              "quantity": 50
            }
          ],
          "reference_type": "goods_receipt",
          "reference_id": "550e8400-e29b-41d4-a716-446655440003"
        }
        ```

        Response:
        ```json
        {
          "stock_moves_created": [
            "550e8400-e29b-41d4-a716-446655440004"
          ],
          "total_quantity_putaway": 50
        }
        ```
      operationId: confirm_putaway
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ConfirmPutawayRequest'
        required: true
      responses:
        '200':
          description: Putaway confirmed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ConfirmPutawayResponse'
        '400':
          description: Invalid allocations
        '401':
          description: Unauthorized
        '404':
          description: Location not found
        '500':
          description: Internal server error
      security:
      - bearer_auth: []
  /api/v1/warehouse/putaway/suggest:
    post:
      tags:
      - putaway
      summary: POST /api/v1/warehouse/putaway/suggest - Get optimal putaway locations for items
      description: |-
        Analyzes putaway rules and suggests optimal storage locations for incoming goods
        based on product characteristics, warehouse layout, and business rules.

        # Authentication
        Requires authenticated user with appropriate tenant access

        # Parameters
        * `request` - Putaway request with product ID, quantity, and preferences

        # Returns
        * `200` - List of suggested locations with scores and capacity information
        * `400` - Invalid request data
        * `401` - Authentication required
        * `403` - Insufficient permissions

        # Example
        ```json
        POST /api/v1/warehouse/putaway/suggest
        {
          "product_id": "550e8400-e29b-41d4-a716-446655440000",
          "quantity": 50,
          "warehouse_id": "550e8400-e29b-41d4-a716-446655440001",
          "preferred_location_type": "pallet_rack",
          "attributes": {
            "fragile": true,
            "size": "large"
          }
        }
        ```

        Response:
        ```json
        {
          "suggestions": [
            {
              "location_id": "550e8400-e29b-41d4-a716-446655440002",
              "location_code": "A-01-01-01",
              "warehouse_id": "550e8400-e29b-41d4-a716-446655440001",
              "zone": "A",
              "aisle": "01",
              "rack": "01",
              "level": 1,
              "position": 1,
              "available_capacity": 150,
              "current_stock": 0,
              "score": 95,
              "rule_applied": "High-priority product rule"
            }
          ],
          "total_quantity": 50,
          "allocated_quantity": 50
        }
        ```
      operationId: suggest_putaway
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PutawayRequest'
        required: true
      responses:
        '200':
          description: Putaway suggestions generated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PutawayResponse'
        '400':
          description: Invalid request data
        '401':
          description: Unauthorized
        '500':
          description: Internal server error
      security:
      - bearer_auth: []
  /bulk/activate:
    post:
      tags:
      - categories
      summary: POST /api/v1/inventory/categories/bulk/activate - Bulk activate categories
      description: |-
        Sets the `is_active` flag to true for multiple categories in a single operation.
        Useful for enabling multiple categories at once.

        # Authentication
        Requires authenticated user with appropriate tenant access

        # Parameters
        * `request` - List of category IDs to activate

        # Returns
        * `200` - Operation result with affected count
        * `400` - Invalid category IDs
        * `401` - Authentication required
        * `403` - Insufficient permissions

        # Example
        ```json
        POST /api/v1/inventory/categories/bulk/activate
        {
          "category_ids": [
            "123e4567-e89b-12d3-a456-426614174000",
            "987fcdeb-51a2-43d7-8f9e-123456789abc"
          ]
        }
        ```
      operationId: bulk_activate_categories
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/BulkCategoryIds'
        required: true
      responses:
        '200':
          description: Operation result with affected count
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BulkOperationResponse'
        '400':
          description: Invalid category IDs
        '401':
          description: Authentication required
        '403':
          description: Insufficient permissions
      security:
      - bearer_auth: []
  /bulk/deactivate:
    post:
      tags:
      - categories
      summary: POST /api/v1/inventory/categories/bulk/deactivate - Bulk deactivate categories
      description: |-
        Sets the `is_active` flag to false for multiple categories in a single operation.
        Useful for disabling multiple categories at once.

        # Authentication
        Requires authenticated user with appropriate tenant access

        # Parameters
        * `request` - List of category IDs to deactivate

        # Returns
        * `200` - Operation result with affected count
        * `400` - Invalid category IDs
        * `401` - Authentication required
        * `403` - Insufficient permissions

        # Example
        ```json
        POST /api/v1/inventory/categories/bulk/deactivate
        {
          "category_ids": [
            "123e4567-e89b-12d3-a456-426614174000",
            "987fcdeb-51a2-43d7-8f9e-123456789abc"
          ]
        }
        ```
      operationId: bulk_deactivate_categories
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/BulkCategoryIds'
        required: true
      responses:
        '200':
          description: Operation result with affected count
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BulkOperationResponse'
        '400':
          description: Invalid category IDs
        '401':
          description: Authentication required
        '403':
          description: Insufficient permissions
      security:
      - bearer_auth: []
  /bulk/delete:
    post:
      tags:
      - categories
      summary: POST /api/v1/inventory/categories/bulk/delete - Bulk delete categories
      description: |-
        Performs soft delete on multiple categories in a single operation.
        Requires admin privileges due to the destructive nature of the operation.

        # Authentication
        Requires admin user authentication

        # Parameters
        * `request` - List of category IDs to delete

        # Returns
        * `200` - Operation result with affected count
        * `400` - Invalid category IDs or categories cannot be deleted
        * `401` - Authentication required
        * `403` - Admin privileges required

        # Example
        ```json
        POST /api/v1/inventory/categories/bulk/delete
        {
          "category_ids": [
            "123e4567-e89b-12d3-a456-426614174000",
            "987fcdeb-51a2-43d7-8f9e-123456789abc"
          ]
        }
        ```
      operationId: bulk_delete_categories
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/BulkCategoryIds'
        required: true
      responses:
        '200':
          description: Operation result with affected count
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BulkOperationResponse'
        '400':
          description: Invalid category IDs or categories cannot be deleted
        '401':
          description: Authentication required
        '403':
          description: Admin privileges required
      security:
      - bearer_auth: []
  /health:
    get:
      tags:
      - health
      operationId: inventory_health_check
      responses:
        '200':
          description: Service is healthy
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HealthResp'
        '503':
          description: Service is unhealthy
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HealthResp'
  /products/move:
    post:
      tags:
      - categories
      summary: POST /api/v1/inventory/categories/products/move - Move products to category
      description: |-
        Moves multiple products from their current categories to a new target category.
        Product counts will be automatically updated for affected categories.

        # Authentication
        Requires authenticated user with appropriate tenant access

        # Parameters
        * `request` - Product IDs and target category ID

        # Returns
        * `200` - Operation result with number of products moved
        * `400` - Invalid product IDs or target category
        * `401` - Authentication required
        * `403` - Insufficient permissions
        * `404` - Target category not found

        # Example
        ```json
        POST /api/v1/inventory/categories/products/move
        {
          "product_ids": [
            "123e4567-e89b-12d3-a456-426614174000",
            "987fcdeb-51a2-43d7-8f9e-123456789abc"
          ],
          "category_id": "456e7890-e89b-12d3-a456-426614174001"
        }
        ```
      operationId: move_products_to_category
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MoveToCategoryRequest'
        required: true
      responses:
        '200':
          description: Operation result with number of products moved
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BulkOperationResponse'
        '400':
          description: Invalid product IDs or target category
        '401':
          description: Authentication required
        '403':
          description: Insufficient permissions
        '404':
          description: Target category not found
      security:
      - bearer_auth: []
  /search:
    get:
      tags:
      - categories
      summary: GET /api/v1/inventory/categories/search - Full-text search categories
      description: |-
        Performs case-insensitive search across category names and descriptions.
        Returns results ordered by name, limited to the specified number of results.

        # Authentication
        Requires authenticated user with appropriate tenant access

        # Query Parameters
        * `q` - Search query string (required)
        * `limit` - Maximum number of results (default: 50, max: 100)

        # Returns
        * `200` - Array of matching categories
        * `400` - Missing or invalid search query
        * `401` - Authentication required
        * `403` - Insufficient permissions

        # Example
        ```
        GET /api/v1/inventory/categories/search?q=electronics&limit=10
        ```
      operationId: search_categories
      parameters:
      - name: q
        in: query
        required: true
        schema:
          type: string
      - name: limit
        in: query
        required: false
        schema:
          type:
          - integer
          - 'null'
          format: int32
      responses:
        '200':
          description: Array of matching categories
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/CategoryResponse'
        '400':
          description: Missing or invalid search query
        '401':
          description: Authentication required
        '403':
          description: Insufficient permissions
      security:
      - bearer_auth: []
  /top:
    get:
      tags:
      - categories
      summary: GET /api/v1/inventory/categories/top - Get top categories by product count
      description: |-
        Returns root categories ordered by total product count (descending),
        then by display order. Useful for displaying popular categories.

        # Authentication
        Requires authenticated user with appropriate tenant access

        # Query Parameters
        * `limit` - Maximum number of categories to return (default: 10, max: 50)

        # Returns
        * `200` - Array of top categories with product counts
        * `400` - Invalid limit parameter
        * `401` - Authentication required
        * `403` - Insufficient permissions

        # Example
        ```
        GET /api/v1/inventory/categories/top?limit=5
        ```
      operationId: get_top_categories
      parameters:
      - name: limit
        in: query
        required: false
        schema:
          type:
          - integer
          - 'null'
          format: int32
      responses:
        '200':
          description: Array of top categories
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/CategoryResponse'
        '400':
          description: Invalid limit parameter
        '401':
          description: Authentication required
        '403':
          description: Insufficient permissions
      security:
      - bearer_auth: []
  /{category_id}/breadcrumbs:
    get:
      tags:
      - categories
      summary: GET /api/v1/inventory/categories/{category_id}/breadcrumbs - Get breadcrumb path
      description: |-
        Returns the complete path from root category to the specified category,
        useful for navigation and displaying hierarchical context.

        # Authentication
        Requires authenticated user with appropriate tenant access

        # Path Parameters
        * `category_id` - UUID of the category to get breadcrumbs for

        # Returns
        * `200` - Array of breadcrumb items from root to current category
        * `401` - Authentication required
        * `403` - Insufficient permissions
        * `404` - Category not found

        # Example
        ```
        GET /api/v1/inventory/categories/123e4567-e89b-12d3-a456-426614174000/breadcrumbs
        ```

        Response:
        ```json
        [
          {"category_id": "root-uuid", "name": "Electronics", "slug": "electronics"},
          {"category_id": "123e4567-e89b-12d3-a456-426614174000", "name": "Smartphones", "slug": "smartphones"}
        ]
        ```
      operationId: get_category_breadcrumbs
      parameters:
      - name: category_id
        in: path
        description: UUID of the category to get breadcrumbs for
        required: true
        schema:
          type: string
          format: uuid
      responses:
        '200':
          description: Array of breadcrumb items from root to current category
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/CategoryBreadcrumb'
        '401':
          description: Authentication required
        '403':
          description: Insufficient permissions
        '404':
          description: Category not found
      security:
      - bearer_auth: []
  /{category_id}/children:
    get:
      tags:
      - categories
      summary: GET /api/v1/inventory/categories/{category_id}/children - Get direct children
      description: |-
        Returns all direct child categories of the specified parent category.
        Children are ordered by display order, then by name.

        # Authentication
        Requires authenticated user with appropriate tenant access

        # Path Parameters
        * `category_id` - UUID of the parent category

        # Returns
        * `200` - Array of child categories
        * `401` - Authentication required
        * `403` - Insufficient permissions
        * `404` - Parent category not found

        # Example
        ```
        GET /api/v1/inventory/categories/123e4567-e89b-12d3-a456-426614174000/children
        ```
      operationId: get_category_children
      parameters:
      - name: category_id
        in: path
        description: UUID of the parent category
        required: true
        schema:
          type: string
          format: uuid
      responses:
        '200':
          description: Array of child categories
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/CategoryResponse'
        '401':
          description: Authentication required
        '403':
          description: Insufficient permissions
        '404':
          description: Parent category not found
      security:
      - bearer_auth: []
  /{category_id}/stats:
    get:
      tags:
      - categories
      summary: GET /api/v1/inventory/categories/{category_id}/stats - Get category statistics
      description: |-
        Returns comprehensive statistics for a category including product counts,
        subcategory counts, and active/inactive product breakdowns.

        # Authentication
        Requires authenticated user with appropriate tenant access

        # Path Parameters
        * `category_id` - UUID of the category to get statistics for

        # Returns
        * `200` - Category statistics including counts and breakdowns
        * `401` - Authentication required
        * `403` - Insufficient permissions
        * `404` - Category not found

        # Example
        ```
        GET /api/v1/inventory/categories/123e4567-e89b-12d3-a456-426614174000/stats
        ```

        Response:
        ```json
        {
          "category_id": "123e4567-e89b-12d3-a456-426614174000",
          "name": "Smartphones",
          "level": 1,
          "product_count": 15,
          "total_product_count": 45,
          "subcategory_count": 3,
          "active_product_count": 42,
          "inactive_product_count": 3
        }
        ```
      operationId: get_category_stats
      parameters:
      - name: category_id
        in: path
        description: UUID of the category to get statistics for
        required: true
        schema:
          type: string
          format: uuid
      responses:
        '200':
          description: Category statistics including counts and breakdowns
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CategoryStatsResponse'
        '401':
          description: Authentication required
        '403':
          description: Insufficient permissions
        '404':
          description: Category not found
      security:
      - bearer_auth: []
components:
  schemas:
    ApproveReconciliationRequest:
      type: object
      description: Request to approve a reconciliation
      properties:
        notes:
          type:
          - string
          - 'null'
          description: Approval notes
    ApproveReconciliationResponse:
      type: object
      description: Response for reconciliation approval
      required:
      - reconciliation
      properties:
        reconciliation:
          $ref: '#/components/schemas/StockReconciliation'
          description: The approved reconciliation
    ApproveRmaRequest:
      type: object
      description: Request to approve or reject an RMA
      required:
      - approved
      properties:
        approved:
          type: boolean
        notes:
          type:
          - string
          - 'null'
    ApproveRmaResponse:
      type: object
      description: Response for RMA approval
      required:
      - rma_id
      - status
      - approved_at
      properties:
        approved_at:
          type: string
          format: date-time
        rma_id:
          type: string
          format: uuid
        status:
          $ref: '#/components/schemas/RmaStatus'
    BulkCategoryIds:
      type: object
      description: Request body for bulk operations
      required:
      - category_ids
      properties:
        category_ids:
          type: array
          items:
            type: string
            format: uuid
    BulkOperationResponse:
      type: object
      description: Bulk operation response
      required:
      - success
      - affected_count
      - message
      properties:
        affected_count:
          type: integer
          format: int32
          minimum: 0
        message:
          type: string
        success:
          type: boolean
    CategoryBreadcrumb:
      type: object
      description: Category breadcrumb item
      required:
      - category_id
      - name
      - level
      properties:
        category_id:
          type: string
          format: uuid
        level:
          type: integer
          format: int32
        name:
          type: string
        slug:
          type:
          - string
          - 'null'
    CategoryCreateRequest:
      type: object
      description: Request to create a new category
      required:
      - name
      properties:
        code:
          type:
          - string
          - 'null'
          description: Optional category code for integration
        color:
          type:
          - string
          - 'null'
          description: 'Hex color code (e.g., #FF5733)'
        description:
          type:
          - string
          - 'null'
          description: Category description
        display_order:
          type: integer
          format: int32
          description: Display order within same level
          minimum: 0
        icon:
          type:
          - string
          - 'null'
          description: Icon name/class for UI
        image_url:
          type:
          - string
          - 'null'
          description: Category image URL
        is_active:
          type: boolean
          description: Whether category is active
        is_visible:
          type: boolean
          description: Whether category is visible in public catalogs
        meta_description:
          type:
          - string
          - 'null'
          description: SEO meta description
        meta_keywords:
          type:
          - string
          - 'null'
          description: SEO meta keywords
        meta_title:
          type:
          - string
          - 'null'
          description: SEO meta title
        name:
          type: string
          description: Category name (required)
        parent_category_id:
          type:
          - string
          - 'null'
          format: uuid
          description: Parent category ID (None for root categories)
        slug:
          type:
          - string
          - 'null'
          description: URL-friendly identifier (auto-generated from name if not provided)
    CategoryListResponse:
      type: object
      description: Paginated list of categories
      required:
      - categories
      - pagination
      properties:
        categories:
          type: array
          items:
            $ref: '#/components/schemas/CategoryResponse'
        pagination:
          $ref: '#/components/schemas/PaginationInfo'
    CategoryResponse:
      type: object
      description: Category response
      required:
      - category_id
      - tenant_id
      - name
      - path
      - level
      - display_order
      - is_active
      - is_visible
      - product_count
      - total_product_count
      - created_at
      - updated_at
      properties:
        breadcrumbs:
          type:
          - array
          - 'null'
          items:
            $ref: '#/components/schemas/CategoryBreadcrumb'
          description: Breadcrumb path from root to this category
        category_id:
          type: string
          format: uuid
        code:
          type:
          - string
          - 'null'
        color:
          type:
          - string
          - 'null'
        created_at:
          type: string
          format: date-time
        description:
          type:
          - string
          - 'null'
        display_order:
          type: integer
          format: int32
        icon:
          type:
          - string
          - 'null'
        image_url:
          type:
          - string
          - 'null'
        is_active:
          type: boolean
        is_visible:
          type: boolean
        level:
          type: integer
          format: int32
        meta_description:
          type:
          - string
          - 'null'
        meta_keywords:
          type:
          - string
          - 'null'
        meta_title:
          type:
          - string
          - 'null'
        name:
          type: string
        parent_category_id:
          type:
          - string
          - 'null'
          format: uuid
        path:
          type: string
        product_count:
          type: integer
          format: int32
        slug:
          type:
          - string
          - 'null'
        tenant_id:
          type: string
          format: uuid
        total_product_count:
          type: integer
          format: int32
        updated_at:
          type: string
          format: date-time
    CategoryStatsResponse:
      type: object
      description: Category statistics response
      required:
      - category_id
      - name
      - level
      - product_count
      - total_product_count
      - subcategory_count
      - active_product_count
      - inactive_product_count
      properties:
        active_product_count:
          type: integer
          format: int32
          minimum: 0
        category_id:
          type: string
          format: uuid
        inactive_product_count:
          type: integer
          format: int32
          minimum: 0
        level:
          type: integer
          format: int32
        name:
          type: string
        product_count:
          type: integer
          format: int32
        subcategory_count:
          type: integer
          format: int32
          minimum: 0
        total_product_count:
          type: integer
          format: int32
    CategoryUpdateRequest:
      type: object
      description: Request to update an existing category
      properties:
        code:
          type:
          - string
          - 'null'
          description: Category code
        color:
          type:
          - string
          - 'null'
          description: Hex color code
        description:
          type:
          - string
          - 'null'
          description: Category description
        display_order:
          type:
          - integer
          - 'null'
          format: int32
          description: Display order within same level
          minimum: 0
        icon:
          type:
          - string
          - 'null'
          description: Icon name/class for UI
        image_url:
          type:
          - string
          - 'null'
          description: Category image URL
        is_active:
          type:
          - boolean
          - 'null'
          description: Whether category is active
        is_visible:
          type:
          - boolean
          - 'null'
          description: Whether category is visible
        meta_description:
          type:
          - string
          - 'null'
          description: SEO meta description
        meta_keywords:
          type:
          - string
          - 'null'
          description: SEO meta keywords
        meta_title:
          type:
          - string
          - 'null'
          description: SEO meta title
        name:
          type:
          - string
          - 'null'
          description: Category name
        parent_category_id:
          type:
          - string
          - 'null'
          format: uuid
          description: Parent category ID (None to make root category)
        slug:
          type:
          - string
          - 'null'
          description: URL-friendly identifier
    ConfirmPickingPlanRequest:
      type: object
      description: Picking plan confirmation request
      required:
      - planId
      properties:
        notes:
          type:
          - string
          - 'null'
          description: Optional notes
        planId:
          type: string
          format: uuid
          description: Plan ID to confirm
    ConfirmPutawayRequest:
      type: object
      required:
      - product_id
      - allocations
      - reference_type
      - reference_id
      properties:
        allocations:
          type: array
          items:
            $ref: '#/components/schemas/PutawayAllocation'
        product_id:
          type: string
          format: uuid
        reference_id:
          type: string
          format: uuid
        reference_type:
          type: string
    ConfirmPutawayResponse:
      type: object
      required:
      - stock_moves_created
      - total_quantity_putaway
      properties:
        stock_moves_created:
          type: array
          items:
            type: string
            format: uuid
        total_quantity_putaway:
          type: integer
          format: int64
    ConfirmTransferRequest:
      type: object
      description: Request to confirm a transfer
      properties:
        notes:
          type:
          - string
          - 'null'
          description: Optional notes for confirmation
    ConfirmTransferResponse:
      type: object
      description: Response for transfer confirmation
      required:
      - transfer_id
      - status
      - confirmed_at
      properties:
        confirmed_at:
          type: string
          description: Confirmation timestamp
        status:
          $ref: '#/components/schemas/TransferStatus'
          description: Updated status
        transfer_id:
          type: string
          format: uuid
          description: Transfer ID
    CostAdjustmentPayload:
      type: object
      required:
      - adjustment_amount
      - reason
      properties:
        adjustment_amount:
          type: integer
          format: int64
        reason:
          type: string
    CountReconciliationRequest:
      type: object
      description: Request to record counts for reconciliation items
      required:
      - items
      properties:
        items:
          type: array
          items:
            $ref: '#/components/schemas/ReconciliationCountItem'
          description: List of counted items
    CountReconciliationResponse:
      type: object
      description: Response for count submission
      required:
      - items
      properties:
        items:
          type: array
          items:
            $ref: '#/components/schemas/StockReconciliationItem'
          description: Updated reconciliation items
    CreateLotSerialRequest:
      type: object
      required:
      - product_id
      - tracking_type
      - status
      properties:
        expiry_date:
          type:
          - string
          - 'null'
          format: date-time
        initial_quantity:
          type:
          - integer
          - 'null'
          format: int64
        lot_number:
          type:
          - string
          - 'null'
        product_id:
          type: string
          format: uuid
        remaining_quantity:
          type:
          - integer
          - 'null'
          format: int64
        serial_number:
          type:
          - string
          - 'null'
        status:
          $ref: '#/components/schemas/LotSerialStatus'
        tracking_type:
          $ref: '#/components/schemas/LotSerialTrackingType'
    CreatePickingMethodRequest:
      type: object
      description: Request DTO for creating a new picking method
      required:
      - name
      - methodType
      - warehouseId
      - config
      properties:
        config:
          description: Method configuration (JSON)
        description:
          type:
          - string
          - 'null'
          description: Optional description
        isDefault:
          type:
          - boolean
          - 'null'
          description: Whether this should be the default method
        methodType:
          type: string
          description: Picking method type
        name:
          type: string
          description: Method name
        warehouseId:
          type: string
          format: uuid
          description: Warehouse ID this method applies to
    CreateQualityControlPoint:
      type: object
      required:
      - name
      - type
      properties:
        name:
          type: string
        product_id:
          type:
          - string
          - 'null'
          format: uuid
        type:
          $ref: '#/components/schemas/QcPointType'
        warehouse_id:
          type:
          - string
          - 'null'
          format: uuid
    CreateReconciliationRequest:
      type: object
      description: Request to create a new reconciliation session
      required:
      - name
      - cycle_type
      properties:
        cycle_type:
          $ref: '#/components/schemas/CycleType'
          description: Cycle counting type
        description:
          type:
          - string
          - 'null'
          description: Optional description
        location_filter:
          description: Location filter for location-based reconciliation
        name:
          type: string
          description: Reconciliation name
        notes:
          type:
          - string
          - 'null'
          description: Optional notes
        product_filter:
          description: Product filter for category/ABC-based reconciliation
        warehouse_id:
          type:
          - string
          - 'null'
          format: uuid
          description: Warehouse to reconcile (optional for full reconciliation)
    CreateReconciliationResponse:
      type: object
      description: Response for reconciliation creation
      required:
      - reconciliation
      properties:
        reconciliation:
          $ref: '#/components/schemas/StockReconciliation'
          description: The created reconciliation
    CreateReorderRule:
      type: object
      description: DTO for creating a new reorder rule
      required:
      - product_id
      - reorder_point
      - min_quantity
      - max_quantity
      - lead_time_days
      - safety_stock
      properties:
        lead_time_days:
          type: integer
          format: int32
        max_quantity:
          type: integer
          format: int64
        min_quantity:
          type: integer
          format: int64
        product_id:
          type: string
          format: uuid
        reorder_point:
          type: integer
          format: int64
        safety_stock:
          type: integer
          format: int64
        warehouse_id:
          type:
          - string
          - 'null'
          format: uuid
    CreateRmaItemRequest:
      type: object
      description: Individual item in RMA creation
      required:
      - product_id
      - quantity_returned
      - condition
      - action
      properties:
        action:
          $ref: '#/components/schemas/RmaAction'
        condition:
          $ref: '#/components/schemas/RmaCondition'
        notes:
          type:
          - string
          - 'null'
        product_id:
          type: string
          format: uuid
        quantity_returned:
          type: integer
          format: int64
        unit_cost:
          type:
          - integer
          - 'null'
          format: int64
        variant_id:
          type:
          - string
          - 'null'
          format: uuid
    CreateRmaRequest:
      type: object
      description: Request to create a new RMA
      required:
      - customer_id
      - original_delivery_id
      - items
      properties:
        customer_id:
          type: string
          format: uuid
        items:
          type: array
          items:
            $ref: '#/components/schemas/CreateRmaItemRequest'
        notes:
          type:
          - string
          - 'null'
        original_delivery_id:
          type: string
          format: uuid
        return_reason:
          type:
          - string
          - 'null'
    CreateRmaResponse:
      type: object
      description: Response for RMA creation
      required:
      - rma_id
      - rma_number
      - status
      - created_at
      properties:
        created_at:
          type: string
          format: date-time
        rma_id:
          type: string
          format: uuid
        rma_number:
          type: string
        status:
          $ref: '#/components/schemas/RmaStatus'
    CreateTransferItemRequest:
      type: object
      description: Request to create a transfer item
      required:
      - product_id
      - quantity
      - uom_id
      - line_number
      properties:
        line_number:
          type: integer
          format: int32
          description: Line number for ordering
        notes:
          type:
          - string
          - 'null'
          description: Additional notes
        product_id:
          type: string
          format: uuid
          description: Product ID
        quantity:
          type: integer
          format: int64
          description: Quantity to transfer
        unit_cost:
          type:
          - integer
          - 'null'
          format: int64
          description: Unit cost in cents (optional)
        uom_id:
          type: string
          format: uuid
          description: Unit of measure ID
    CreateTransferRequest:
      type: object
      description: Request to create a new transfer
      required:
      - source_warehouse_id
      - destination_warehouse_id
      - items
      properties:
        destination_warehouse_id:
          type: string
          format: uuid
          description: Destination warehouse ID
        expected_receive_date:
          type:
          - string
          - 'null'
          description: Expected receive date
        expected_ship_date:
          type:
          - string
          - 'null'
          description: Expected ship date
        items:
          type: array
          items:
            $ref: '#/components/schemas/CreateTransferItemRequest'
          description: Transfer items
        notes:
          type:
          - string
          - 'null'
          description: Additional notes
        priority:
          $ref: '#/components/schemas/TransferPriority'
          description: Priority level (defaults to normal)
        reason:
          type:
          - string
          - 'null'
          description: Reason for transfer
        reference_number:
          type:
          - string
          - 'null'
          description: Optional external reference number
        shipping_method:
          type:
          - string
          - 'null'
          description: Shipping method
        source_warehouse_id:
          type: string
          format: uuid
          description: Source warehouse ID
        transfer_type:
          $ref: '#/components/schemas/TransferType'
          description: Transfer type (defaults to manual)
    CreateTransferResponse:
      type: object
      description: Response for transfer creation
      required:
      - transfer_id
      - transfer_number
      - status
      - items_count
      properties:
        items_count:
          type: integer
          description: Number of items created
          minimum: 0
        status:
          $ref: '#/components/schemas/TransferStatus'
          description: Transfer status
        transfer_id:
          type: string
          format: uuid
          description: Created transfer ID
        transfer_number:
          type: string
          description: Generated transfer number
    CreateWarehouseLocationRequest:
      type: object
      description: Request DTO for creating a warehouse location
      required:
      - locationCode
      - locationType
      properties:
        capacityInfo:
          description: Capacity information
        coordinates:
          description: Physical coordinates
        description:
          type:
          - string
          - 'null'
          description: Optional description
        dimensions:
          description: Dimensions
        locationAttributes:
          description: Location attributes
        locationCode:
          type: string
          description: Location code (unique per warehouse)
        locationName:
          type:
          - string
          - 'null'
          description: Optional location name
        locationType:
          type: string
          description: Location type
        zoneId:
          type:
          - string
          - 'null'
          format: uuid
          description: Zone ID (optional - location can exist without zone)
    CreateWarehouseRequest:
      type: object
      description: Request DTO for creating a new warehouse
      required:
      - warehouseCode
      - warehouseName
      - warehouseType
      properties:
        address:
          description: Address information
        capacityInfo:
          description: Capacity information
        contactInfo:
          description: Contact information
        description:
          type:
          - string
          - 'null'
          description: Optional description
        parentWarehouseId:
          type:
          - string
          - 'null'
          format: uuid
          description: Parent warehouse ID for hierarchy (optional)
        warehouseCode:
          type: string
          description: Warehouse code (unique per tenant)
        warehouseName:
          type: string
          description: Warehouse name
        warehouseType:
          type: string
          description: Warehouse type
    CreateWarehouseZoneRequest:
      type: object
      description: Request DTO for creating a warehouse zone
      required:
      - zoneCode
      - zoneName
      - zoneType
      properties:
        capacityInfo:
          description: Capacity information
        description:
          type:
          - string
          - 'null'
          description: Optional description
        zoneAttributes:
          description: Zone attributes
        zoneCode:
          type: string
          description: Zone code (unique per warehouse)
        zoneName:
          type: string
          description: Zone name
        zoneType:
          type: string
          description: Zone type
    CycleType:
      type: string
      description: Cycle counting type enumeration
      enum:
      - full
      - abc_a
      - abc_b
      - abc_c
      - location
      - random
    DeadStockEntry:
      type: object
      required:
      - product_id
      - product_name
      - warehouse_id
      - warehouse_name
      - current_stock
      properties:
        current_stock:
          type: integer
          format: int64
          description: Current stock quantity
        days_since_last_outbound:
          type:
          - integer
          - 'null'
          format: int64
          description: Days since last outbound
        last_outbound_date:
          type:
          - string
          - 'null'
          format: date-time
          description: Last outbound movement date
        product_id:
          type: string
          format: uuid
          description: Product ID
        product_name:
          type: string
          description: Product name
        warehouse_id:
          type: string
          format: uuid
          description: Warehouse ID
        warehouse_name:
          type: string
          description: Warehouse name
    DeadStockQuery:
      type: object
      properties:
        days_threshold:
          type:
          - integer
          - 'null'
          format: int32
          description: 'Days threshold for considering stock as dead (default: 90)'
        warehouse_id:
          type:
          - string
          - 'null'
          format: uuid
          description: Warehouse ID to filter by location (optional)
    ErrorResponse:
      type: object
      description: Error response for OpenAPI documentation
      required:
      - error
      - code
      properties:
        code:
          type: string
          description: Error code
        error:
          type: string
          description: Error message
    FinalizeReconciliationRequest:
      type: object
      description: Request to finalize a reconciliation (no body needed, just the ID in path)
    FinalizeReconciliationResponse:
      type: object
      description: Response for reconciliation finalization
      required:
      - reconciliation
      - adjustments
      properties:
        adjustments:
          type: array
          items:
            $ref: '#/components/schemas/StockAdjustment'
          description: Generated stock adjustments (if any)
        reconciliation:
          $ref: '#/components/schemas/StockReconciliation'
          description: The finalized reconciliation
    HealthResp:
      type: object
      required:
      - status
      - version
      - timestamp
      - database
      - nats
      properties:
        database:
          type: string
        nats:
          type: string
        status:
          type: string
        timestamp:
          type: string
          format: date-time
        version:
          type: string
    HistoryQueryParams:
      type: object
      properties:
        limit:
          type:
          - integer
          - 'null'
          format: int64
        offset:
          type:
          - integer
          - 'null'
          format: int64
    InventoryTurnoverEntry:
      type: object
      required:
      - product_id
      - product_name
      - turnover_ratio
      - cogs
      - avg_inventory_value
      - period
      properties:
        avg_inventory_value:
          type: integer
          format: int64
          description: Average inventory value
        cogs:
          type: integer
          format: int64
          description: Cost of Goods Sold
        period:
          type: string
          description: Reporting period
        product_id:
          type: string
          format: uuid
          description: Product ID
        product_name:
          type: string
          description: Product name
        turnover_ratio:
          type: number
          format: double
          description: Turnover ratio (COGS / Average Inventory Value)
    InventoryTurnoverQuery:
      type: object
      properties:
        period:
          type: string
          description: 'Reporting period in days (default: 90)'
    ListLotSerialsQuery:
      type: object
      properties:
        status:
          oneOf:
          - type: 'null'
          - $ref: '#/components/schemas/LotSerialStatus'
        tracking_type:
          oneOf:
          - type: 'null'
          - $ref: '#/components/schemas/LotSerialTrackingType'
    LotSerial:
      type: object
      required:
      - lot_serial_id
      - tenant_id
      - product_id
      - tracking_type
      - status
      - created_by
      - created_at
      - updated_at
      properties:
        created_at:
          type: string
          format: date-time
        created_by:
          type: string
          format: uuid
        deleted_at:
          type:
          - string
          - 'null'
          format: date-time
        expiry_date:
          type:
          - string
          - 'null'
          format: date-time
        initial_quantity:
          type:
          - integer
          - 'null'
          format: int64
        location_id:
          type:
          - string
          - 'null'
          format: uuid
        lot_number:
          type:
          - string
          - 'null'
        lot_serial_id:
          type: string
          format: uuid
        product_id:
          type: string
          format: uuid
        remaining_quantity:
          type:
          - integer
          - 'null'
          format: int64
        serial_number:
          type:
          - string
          - 'null'
        status:
          $ref: '#/components/schemas/LotSerialStatus'
        tenant_id:
          type: string
          format: uuid
        tracking_type:
          $ref: '#/components/schemas/LotSerialTrackingType'
        updated_at:
          type: string
          format: date-time
        updated_by:
          type:
          - string
          - 'null'
          format: uuid
        warehouse_id:
          type:
          - string
          - 'null'
          format: uuid
    LotSerialLifecycle:
      type: object
      required:
      - lot_serial
      - stock_moves
      - quality_checks
      properties:
        coa_link:
          type:
          - string
          - 'null'
          description: 'TODO: Populate from quality documents or attachments'
        current_location_code:
          type:
          - string
          - 'null'
          description: 'TODO: Populate from location table using lot_serial.location_id'
        current_warehouse_name:
          type:
          - string
          - 'null'
          description: 'TODO: Populate from warehouse table using lot_serial.location_id'
        lot_serial:
          $ref: '#/components/schemas/LotSerial'
        purchase_order_number:
          type:
          - string
          - 'null'
          description: 'TODO: Populate from purchase order table'
        quality_checks:
          type: array
          items: {}
          description: 'TODO: Populate from quality_checks table or related records'
        stock_moves:
          type: array
          items:
            $ref: '#/components/schemas/StockMove'
        supplier_name:
          type:
          - string
          - 'null'
          description: 'TODO: Populate from supplier table via purchase order'
    LotSerialStatus:
      type: string
      enum:
      - active
      - expired
      - quarantined
      - disposed
      - reserved
    LotSerialTrackingType:
      type: string
      enum:
      - lot
      - serial
    LowStockEntry:
      type: object
      required:
      - product_id
      - product_name
      - current_stock
      - reorder_point
      properties:
        current_stock:
          type: integer
          format: int64
          description: Current stock quantity
        product_id:
          type: string
          format: uuid
          description: Product ID
        product_name:
          type: string
          description: Product name
        reorder_point:
          type: integer
          format: int64
          description: Reorder point
        warehouse_id:
          type:
          - string
          - 'null'
          format: uuid
          description: Warehouse ID
        warehouse_name:
          type:
          - string
          - 'null'
          description: Warehouse name
    LowStockQuery:
      type: object
      properties:
        warehouse_id:
          type:
          - string
          - 'null'
          format: uuid
          description: Warehouse ID to filter by location (optional)
    MoveToCategoryRequest:
      type: object
      description: Request to move multiple products to a category
      required:
      - product_ids
      - category_id
      properties:
        category_id:
          type: string
          format: uuid
          description: Target category ID
        product_ids:
          type: array
          items:
            type: string
            format: uuid
          description: Product IDs to move
    PaginationInfo:
      type: object
      required:
      - page
      - pageSize
      - totalItems
      - totalPages
      - hasNext
      - hasPrev
      properties:
        hasNext:
          type: boolean
        hasPrev:
          type: boolean
        page:
          type: integer
          format: int32
          minimum: 0
        pageSize:
          type: integer
          format: int32
          minimum: 0
        totalItems:
          type: integer
          format: int64
          minimum: 0
        totalPages:
          type: integer
          format: int32
          minimum: 0
    PickingMethodResponse:
      type: object
      description: Picking method response DTO
      required:
      - methodId
      - tenantId
      - name
      - methodType
      - warehouseId
      - config
      - isActive
      - isDefault
      - createdAt
      - updatedAt
      properties:
        config:
          description: Configuration
        createdAt:
          type: string
          format: date-time
          description: Timestamps
        description:
          type:
          - string
          - 'null'
        isActive:
          type: boolean
          description: Status flags
        isDefault:
          type: boolean
        methodId:
          type: string
          format: uuid
          description: Method ID
        methodType:
          type: string
          description: Method type
        name:
          type: string
          description: Method metadata
        tenantId:
          type: string
          format: uuid
          description: Tenant ID
        updatedAt:
          type: string
          format: date-time
        warehouseId:
          type: string
          format: uuid
          description: Warehouse ID
    PickingMetrics:
      type: object
      description: Picking optimization metrics
      required:
      - taskCount
      properties:
        efficiencyScore:
          type:
          - number
          - 'null'
          format: double
          description: Efficiency score (0-100)
        taskCount:
          type: integer
          format: int32
          description: Number of tasks
          minimum: 0
        totalDistanceMeters:
          type:
          - number
          - 'null'
          format: double
          description: Total distance (meters)
        totalEstimatedTimeSeconds:
          type:
          - integer
          - 'null'
          format: int32
          description: Total estimated time (seconds)
        travelTimeReductionPercent:
          type:
          - number
          - 'null'
          format: double
          description: Travel time reduction percentage
    PickingOptimizationRequest:
      type: object
      description: Picking optimization request DTO
      required:
      - warehouseId
      - orderIds
      - criteria
      properties:
        constraints:
          description: Additional constraints
        criteria:
          type: array
          items:
            type: string
          description: Optimization criteria
        methodId:
          type:
          - string
          - 'null'
          format: uuid
          description: Optional picking method ID to use
        orderIds:
          type: array
          items:
            type: string
            format: uuid
          description: Order IDs to optimize picking for
        warehouseId:
          type: string
          format: uuid
          description: Warehouse ID
    PickingPlanResponse:
      type: object
      description: Picking plan response DTO
      required:
      - planId
      - methodId
      - methodName
      - methodType
      - warehouseId
      - orderIds
      - tasks
      - metrics
      - generatedAt
      properties:
        generatedAt:
          type: string
          format: date-time
          description: Generated timestamp
        methodId:
          type: string
          format: uuid
          description: Method used
        methodName:
          type: string
        methodType:
          type: string
        metrics:
          $ref: '#/components/schemas/PickingMetrics'
          description: Optimization metrics
        orderIds:
          type: array
          items:
            type: string
            format: uuid
          description: Order IDs included
        planId:
          type: string
          format: uuid
          description: Plan ID
        tasks:
          type: array
          items:
            $ref: '#/components/schemas/PickingTask'
          description: Optimized picking tasks
        warehouseId:
          type: string
          format: uuid
          description: Warehouse ID
    PickingTask:
      type: object
      description: Individual picking task
      required:
      - taskId
      - orderId
      - productId
      - productCode
      - productName
      - quantity
      - locationId
      - locationCode
      - sequence
      properties:
        estimatedTimeSeconds:
          type:
          - integer
          - 'null'
          format: int32
          description: Estimated time (seconds)
        locationCode:
          type: string
        locationId:
          type: string
          format: uuid
          description: Location to pick from
        orderId:
          type: string
          format: uuid
          description: Order ID this task belongs to
        productCode:
          type: string
        productId:
          type: string
          format: uuid
          description: Product to pick
        productName:
          type: string
        quantity:
          type: integer
          format: int64
          description: Quantity to pick
        sequence:
          type: integer
          format: int32
          description: Task sequence/order
        taskId:
          type: string
          format: uuid
          description: Task ID
    ProductCreateRequest:
      type: object
      description: Product creation request DTO
      required:
      - sku
      - name
      - productType
      - currencyCode
      properties:
        attributes:
          description: Additional product attributes (JSON)
        costPrice:
          type:
          - integer
          - 'null'
          format: int64
          description: Cost price in cents (smallest currency unit)
        currencyCode:
          type: string
          description: Currency code (ISO 4217)
        defaultUomId:
          type:
          - string
          - 'null'
          format: uuid
          description: Default unit of measure ID
        description:
          type:
          - string
          - 'null'
          description: Optional product description
        dimensions:
          description: Product dimensions (JSON)
        isActive:
          type:
          - boolean
          - 'null'
          description: Whether product is active
        isPurchaseable:
          type:
          - boolean
          - 'null'
          description: Whether product is available for purchase
        isSellable:
          type:
          - boolean
          - 'null'
          description: Whether product is available for sale
        itemGroupId:
          type:
          - string
          - 'null'
          format: uuid
          description: Optional item group ID
        name:
          type: string
          description: Product name
        productType:
          type: string
          description: Product type (goods, service, consumable)
        salePrice:
          type:
          - integer
          - 'null'
          format: int64
          description: Sale price in cents (smallest currency unit)
        sku:
          type: string
          description: Product SKU (unique within tenant)
        trackInventory:
          type:
          - boolean
          - 'null'
          description: Whether to track inventory for this product
        trackingMethod:
          oneOf:
          - type: 'null'
          - $ref: '#/components/schemas/ProductTrackingMethod'
            description: Inventory tracking method
        weightGrams:
          type:
          - integer
          - 'null'
          format: int32
          description: Product weight in grams
    ProductListQuery:
      type: object
      description: Product list query parameters
      properties:
        isActive:
          type:
          - boolean
          - 'null'
          description: Filter by active status
        isPurchaseable:
          type:
          - boolean
          - 'null'
          description: Filter by purchaseable status
        isSellable:
          type:
          - boolean
          - 'null'
          description: Filter by sellable status
        page:
          type: integer
          format: int64
          description: Page number (1-based)
        pageSize:
          type: integer
          format: int64
          description: Items per page
        productType:
          type:
          - string
          - 'null'
          description: Filter by product type
        search:
          type:
          - string
          - 'null'
          description: Search in name, SKU, and description
        sortBy:
          type: string
          description: Sort field
        sortDir:
          type: string
          description: Sort direction
    ProductListResponse:
      type: object
      description: Product list response DTO
      required:
      - products
      - pagination
      properties:
        pagination:
          $ref: '#/components/schemas/PaginationInfo'
          description: Pagination information
        products:
          type: array
          items:
            $ref: '#/components/schemas/ProductResponse'
          description: List of products
    ProductResponse:
      type: object
      description: Product response DTO
      required:
      - productId
      - tenantId
      - sku
      - name
      - productType
      - trackInventory
      - trackingMethod
      - currencyCode
      - isActive
      - isSellable
      - isPurchaseable
      - createdAt
      - updatedAt
      properties:
        attributes: {}
        costPrice:
          type:
          - integer
          - 'null'
          format: int64
        createdAt:
          type: string
          format: date-time
          description: Audit fields
        currencyCode:
          type: string
        defaultUomId:
          type:
          - string
          - 'null'
          format: uuid
          description: Units of measure
        description:
          type:
          - string
          - 'null'
        dimensions: {}
        isActive:
          type: boolean
          description: Product lifecycle
        isPurchaseable:
          type: boolean
        isSellable:
          type: boolean
        itemGroupId:
          type:
          - string
          - 'null'
          format: uuid
        name:
          type: string
        productId:
          type: string
          format: uuid
          description: Primary key using UUID v7
        productType:
          type: string
          description: Product classification
        salePrice:
          type:
          - integer
          - 'null'
          format: int64
          description: 'Pricing (stored in smallest currency unit: cents/xu)'
        sku:
          type: string
          description: Core product identifiers
        tenantId:
          type: string
          format: uuid
          description: 'Multi-tenancy: Tenant ID'
        trackInventory:
          type: boolean
          description: Inventory tracking
        trackingMethod:
          $ref: '#/components/schemas/ProductTrackingMethod'
        updatedAt:
          type: string
          format: date-time
        weightGrams:
          type:
          - integer
          - 'null'
          format: int32
          description: Product attributes
    ProductTrackingMethod:
      type: string
      description: Product tracking method for inventory management
      enum:
      - none
      - lot
      - serial
    ProductUpdateRequest:
      type: object
      description: Product update request DTO
      properties:
        attributes:
          description: Additional product attributes (JSON)
        costPrice:
          type:
          - integer
          - 'null'
          format: int64
          description: Cost price in cents
        currencyCode:
          type:
          - string
          - 'null'
          description: Currency code
        defaultUomId:
          type:
          - string
          - 'null'
          format: uuid
          description: Default unit of measure ID
        description:
          type:
          - string
          - 'null'
          description: Product description
        dimensions:
          description: Product dimensions (JSON)
        isActive:
          type:
          - boolean
          - 'null'
          description: Whether product is active
        isPurchaseable:
          type:
          - boolean
          - 'null'
          description: Whether product is available for purchase
        isSellable:
          type:
          - boolean
          - 'null'
          description: Whether product is available for sale
        itemGroupId:
          type:
          - string
          - 'null'
          format: uuid
          description: Item group ID
        name:
          type:
          - string
          - 'null'
          description: Product name
        productType:
          type:
          - string
          - 'null'
          description: Product type
        salePrice:
          type:
          - integer
          - 'null'
          format: int64
          description: Sale price in cents
        trackInventory:
          type:
          - boolean
          - 'null'
          description: Whether to track inventory
        trackingMethod:
          oneOf:
          - type: 'null'
          - $ref: '#/components/schemas/ProductTrackingMethod'
            description: Inventory tracking method
        weightGrams:
          type:
          - integer
          - 'null'
          format: int32
          description: Product weight in grams
    PutawayAllocation:
      type: object
      required:
      - location_id
      - quantity
      properties:
        location_id:
          type: string
          format: uuid
        quantity:
          type: integer
          format: int64
        unit_cost:
          type:
          - integer
          - 'null'
          format: int64
    PutawayRequest:
      type: object
      required:
      - product_id
      - quantity
      properties:
        attributes: {}
        preferred_location_type:
          type:
          - string
          - 'null'
        product_category_id:
          type:
          - string
          - 'null'
          format: uuid
        product_id:
          type: string
          format: uuid
        quantity:
          type: integer
          format: int64
        warehouse_id:
          type:
          - string
          - 'null'
          format: uuid
    PutawayResponse:
      type: object
      required:
      - suggestions
      - total_quantity
      - allocated_quantity
      properties:
        allocated_quantity:
          type: integer
          format: int64
        suggestions:
          type: array
          items:
            $ref: '#/components/schemas/PutawaySuggestion'
        total_quantity:
          type: integer
          format: int64
    PutawaySuggestion:
      type: object
      required:
      - location_id
      - location_code
      - warehouse_id
      - current_stock
      - score
      properties:
        aisle:
          type:
          - string
          - 'null'
        available_capacity:
          type:
          - integer
          - 'null'
          format: int64
        current_stock:
          type: integer
          format: int64
        level:
          type:
          - integer
          - 'null'
          format: int32
        location_code:
          type: string
        location_id:
          type: string
          format: uuid
        position:
          type:
          - integer
          - 'null'
          format: int32
        rack:
          type:
          - string
          - 'null'
        rule_applied:
          type:
          - string
          - 'null'
        score:
          type: integer
          format: int32
        warehouse_id:
          type: string
          format: uuid
        zone:
          type:
          - string
          - 'null'
    QcPointType:
      type: string
      enum:
      - Incoming
      - Outgoing
      - Internal
    QualityControlPoint:
      type: object
      required:
      - qc_point_id
      - tenant_id
      - name
      - qc_type
      - active
      - created_at
      - updated_at
      properties:
        active:
          type: boolean
        created_at:
          type: string
          format: date-time
        name:
          type: string
        product_id:
          type:
          - string
          - 'null'
          format: uuid
        qc_point_id:
          type: string
          format: uuid
        qc_type:
          $ref: '#/components/schemas/QcPointType'
        tenant_id:
          type: string
          format: uuid
        updated_at:
          type: string
          format: date-time
        warehouse_id:
          type:
          - string
          - 'null'
          format: uuid
    QuarantineResponse:
      type: object
      required:
      - quarantined_count
      properties:
        quarantined_count:
          type: integer
          format: int64
    ReceiptCreateRequest:
      type: object
      description: Request to create a new Goods Receipt Note
      required:
      - warehouse_id
      - currency_code
      - items
      properties:
        currency_code:
          type: string
          description: ISO 4217 currency code (e.g., "VND", "USD")
        expected_delivery_date:
          type:
          - string
          - 'null'
          format: date-time
          description: Expected delivery date from supplier
        items:
          type: array
          items:
            $ref: '#/components/schemas/ReceiptItemCreateRequest'
          description: Line items being received
        notes:
          type:
          - string
          - 'null'
          description: Additional notes about the receipt
        reference_number:
          type:
          - string
          - 'null'
          description: External reference number (purchase order, etc.)
        supplier_id:
          type:
          - string
          - 'null'
          format: uuid
          description: Supplier providing the goods (optional for now)
        warehouse_id:
          type: string
          format: uuid
          description: Warehouse where goods are being received
    ReceiptItemCreateRequest:
      type: object
      description: Request to create a receipt line item
      required:
      - product_id
      - expected_quantity
      - received_quantity
      properties:
        expected_quantity:
          type: integer
          format: int64
          description: Expected quantity from purchase order
        expiry_date:
          type:
          - string
          - 'null'
          format: date-time
          description: Expiry date for perishable goods
        lot_number:
          type:
          - string
          - 'null'
          description: Lot number for batch tracking
        notes:
          type:
          - string
          - 'null'
          description: Additional notes for this line item
        product_id:
          type: string
          format: uuid
          description: Product being received
        received_quantity:
          type: integer
          format: int64
          description: Actual quantity received
        serial_numbers:
          description: Array of serial numbers if tracking method is 'serial'
        unit_cost:
          type:
          - integer
          - 'null'
          format: int64
          description: Cost per unit in smallest currency unit (cents/xu)
        uom_id:
          type:
          - string
          - 'null'
          format: uuid
          description: Unit of measure for quantities
    ReceiptItemResponse:
      type: object
      description: Response containing receipt line item details
      required:
      - receipt_item_id
      - receipt_id
      - tenant_id
      - product_id
      - expected_quantity
      - received_quantity
      - created_at
      - updated_at
      properties:
        created_at:
          type: string
          format: date-time
          description: Creation timestamp
        expected_quantity:
          type: integer
          format: int64
          description: Expected quantity from purchase order
        expiry_date:
          type:
          - string
          - 'null'
          format: date-time
          description: Expiry date for perishable goods
        line_total:
          type:
          - integer
          - 'null'
          format: int64
          description: Calculated total cost for this line
        lot_number:
          type:
          - string
          - 'null'
          description: Lot number for batch tracking
        notes:
          type:
          - string
          - 'null'
          description: Additional notes
        product_id:
          type: string
          format: uuid
          description: Product being received
        receipt_id:
          type: string
          format: uuid
          description: Parent receipt identifier
        receipt_item_id:
          type: string
          format: uuid
          description: Unique item identifier
        received_quantity:
          type: integer
          format: int64
          description: Actual quantity received
        serial_numbers:
          description: Serial numbers JSON
        tenant_id:
          type: string
          format: uuid
          description: Tenant identifier
        unit_cost:
          type:
          - integer
          - 'null'
          format: int64
          description: Cost per unit in smallest currency unit
        uom_id:
          type:
          - string
          - 'null'
          format: uuid
          description: Unit of measure
        updated_at:
          type: string
          format: date-time
          description: Last update timestamp
    ReceiptListResponse:
      type: object
      description: Paginated response for receipt listing
      required:
      - receipts
      - pagination
      properties:
        pagination:
          $ref: '#/components/schemas/PaginationInfo'
          description: Pagination metadata
        receipts:
          type: array
          items:
            $ref: '#/components/schemas/ReceiptSummaryResponse'
          description: List of receipts
    ReceiptResponse:
      type: object
      description: Response containing created receipt details
      required:
      - receipt_id
      - receipt_number
      - tenant_id
      - warehouse_id
      - status
      - receipt_date
      - created_by
      - currency_code
      - items
      - created_at
      - updated_at
      properties:
        actual_delivery_date:
          type:
          - string
          - 'null'
          format: date-time
          description: Actual delivery date
        created_at:
          type: string
          format: date-time
          description: Creation timestamp
        created_by:
          type: string
          format: uuid
          description: User who created the GRN
        currency_code:
          type: string
          description: ISO 4217 currency code
        expected_delivery_date:
          type:
          - string
          - 'null'
          format: date-time
          description: Expected delivery date
        items:
          type: array
          items:
            $ref: '#/components/schemas/ReceiptItemResponse'
          description: Line items in the receipt
        notes:
          type:
          - string
          - 'null'
          description: Additional notes
        receipt_date:
          type: string
          format: date-time
          description: Date when the GRN was created
        receipt_id:
          type: string
          format: uuid
          description: Unique receipt identifier
        receipt_number:
          type: string
          description: Auto-generated receipt number (GRN-YYYY-XXXXX)
        reference_number:
          type:
          - string
          - 'null'
          description: External reference number
        status:
          type: string
          description: Current receipt status
        supplier_id:
          type:
          - string
          - 'null'
          format: uuid
          description: Supplier providing the goods
        tenant_id:
          type: string
          format: uuid
          description: Tenant identifier
        total_quantity:
          type:
          - integer
          - 'null'
          format: int64
          description: Total quantity of all items
        total_value:
          type:
          - integer
          - 'null'
          format: int64
          description: Total value in smallest currency unit
        updated_at:
          type: string
          format: date-time
          description: Last update timestamp
        warehouse_id:
          type: string
          format: uuid
          description: Warehouse where goods are received
    ReceiptSummaryResponse:
      type: object
      description: Summary response for receipt listing (without full items)
      required:
      - receipt_id
      - receipt_number
      - warehouse_id
      - status
      - receipt_date
      - currency_code
      - item_count
      - created_at
      properties:
        created_at:
          type: string
          format: date-time
          description: Creation timestamp
        currency_code:
          type: string
          description: Currency code
        item_count:
          type: integer
          format: int32
          description: Number of line items
        receipt_date:
          type: string
          format: date-time
          description: Receipt creation date
        receipt_id:
          type: string
          format: uuid
          description: Unique receipt identifier
        receipt_number:
          type: string
          description: Auto-generated receipt number
        reference_number:
          type:
          - string
          - 'null'
          description: External reference number
        status:
          type: string
          description: Current status
        supplier_id:
          type:
          - string
          - 'null'
          format: uuid
          description: Supplier identifier
        total_quantity:
          type:
          - integer
          - 'null'
          format: int64
          description: Total quantity
        total_value:
          type:
          - integer
          - 'null'
          format: int64
          description: Total value
        warehouse_id:
          type: string
          format: uuid
          description: Warehouse identifier
    ReceiveRmaItemRequest:
      type: object
      description: Individual item in RMA receive
      required:
      - rma_item_id
      - received_quantity
      - condition
      properties:
        condition:
          $ref: '#/components/schemas/RmaCondition'
        notes:
          type:
          - string
          - 'null'
        received_quantity:
          type: integer
          format: int64
        rma_item_id:
          type: string
          format: uuid
    ReceiveRmaRequest:
      type: object
      description: Request to receive returned goods
      required:
      - received_items
      properties:
        notes:
          type:
          - string
          - 'null'
        received_items:
          type: array
          items:
            $ref: '#/components/schemas/ReceiveRmaItemRequest'
    ReceiveRmaResponse:
      type: object
      description: Response for RMA receive
      required:
      - rma_id
      - status
      - received_at
      - stock_moves_created
      properties:
        received_at:
          type: string
          format: date-time
        rma_id:
          type: string
          format: uuid
        status:
          $ref: '#/components/schemas/RmaStatus'
        stock_moves_created:
          type: integer
          minimum: 0
    ReceiveTransferRequest:
      type: object
      description: Request to receive a transfer
      properties:
        notes:
          type:
          - string
          - 'null'
          description: Optional notes for receipt
    ReceiveTransferResponse:
      type: object
      description: Response for transfer receipt
      required:
      - transfer_id
      - status
      - received_at
      - stock_moves_created
      properties:
        received_at:
          type: string
          description: Receipt timestamp
        status:
          $ref: '#/components/schemas/TransferStatus'
          description: Updated status
        stock_moves_created:
          type: integer
          description: Number of stock moves created
          minimum: 0
        transfer_id:
          type: string
          format: uuid
          description: Transfer ID
    ReconciliationAnalyticsResponse:
      type: object
      description: Reconciliation analytics/summary response
      required:
      - total_reconciliations
      - completed_reconciliations
      - high_variance_items
      properties:
        accuracy_rate:
          type:
          - number
          - 'null'
          format: double
          description: Reconciliation accuracy rate
        average_variance_percentage:
          type:
          - number
          - 'null'
          format: double
          description: Average variance percentage
        completed_reconciliations:
          type: integer
          format: int64
          description: Completed reconciliations
        high_variance_items:
          type: integer
          format: int64
          description: Items with high variance (>5%)
        total_reconciliations:
          type: integer
          format: int64
          description: Total reconciliations
        total_variance_value:
          type:
          - number
          - 'null'
          format: double
          description: Total variance value
    ReconciliationCountItem:
      type: object
      description: Individual count item
      required:
      - product_id
      - warehouse_id
      - counted_quantity
      properties:
        counted_quantity:
          type: integer
          format: int64
          description: Actual counted quantity
        location_id:
          type:
          - string
          - 'null'
          format: uuid
          description: Specific location (optional)
        notes:
          type:
          - string
          - 'null'
          description: Optional notes for this count
        product_id:
          type: string
          format: uuid
          description: Product being counted
        unit_cost:
          type:
          - number
          - 'null'
          format: double
          description: Unit cost for valuation (optional)
        warehouse_id:
          type: string
          format: uuid
          description: Warehouse
    ReconciliationDetailResponse:
      type: object
      description: Response for getting a single reconciliation with items
      required:
      - reconciliation
      - items
      properties:
        items:
          type: array
          items:
            $ref: '#/components/schemas/StockReconciliationItem'
          description: Associated items
        reconciliation:
          $ref: '#/components/schemas/StockReconciliation'
          description: The reconciliation
    ReconciliationListResponse:
      type: object
      description: Response for reconciliation list
      required:
      - reconciliations
      - pagination
      properties:
        pagination:
          $ref: '#/components/schemas/PaginationInfo'
          description: Pagination info
        reconciliations:
          type: array
          items:
            $ref: '#/components/schemas/StockReconciliation'
          description: List of reconciliations
    ReconciliationStatus:
      type: string
      description: Reconciliation status enumeration
      enum:
      - draft
      - in_progress
      - completed
      - cancelled
    ReorderRule:
      type: object
      description: Reorder rule for automated stock replenishment
      required:
      - rule_id
      - tenant_id
      - product_id
      - reorder_point
      - min_quantity
      - max_quantity
      - lead_time_days
      - safety_stock
      - created_at
      - updated_at
      properties:
        created_at:
          type: string
          format: date-time
        deleted_at:
          type:
          - string
          - 'null'
          format: date-time
        lead_time_days:
          type: integer
          format: int32
        max_quantity:
          type: integer
          format: int64
        min_quantity:
          type: integer
          format: int64
        product_id:
          type: string
          format: uuid
        reorder_point:
          type: integer
          format: int64
        rule_id:
          type: string
          format: uuid
        safety_stock:
          type: integer
          format: int64
        tenant_id:
          type: string
          format: uuid
        updated_at:
          type: string
          format: date-time
        warehouse_id:
          type:
          - string
          - 'null'
          format: uuid
    ReplenishmentCheckResult:
      type: object
      description: Result of replenishment check
      required:
      - product_id
      - current_quantity
      - projected_quantity
      - reorder_point
      - suggested_order_quantity
      - needs_replenishment
      properties:
        action_taken:
          type:
          - string
          - 'null'
        current_quantity:
          type: integer
          format: int64
        needs_replenishment:
          type: boolean
        product_id:
          type: string
          format: uuid
        projected_quantity:
          type: integer
          format: int64
        reorder_point:
          type: integer
          format: int64
        suggested_order_quantity:
          type: integer
          format: int64
        warehouse_id:
          type:
          - string
          - 'null'
          format: uuid
    RevaluationPayload:
      type: object
      required:
      - new_unit_cost
      - reason
      properties:
        new_unit_cost:
          type: integer
          format: int64
        reason:
          type: string
    RmaAction:
      type: string
      enum:
      - restock
      - scrap
      - refund
      - exchange
    RmaCondition:
      type: string
      enum:
      - new
      - used
      - damaged
      - defective
    RmaStatus:
      type: string
      enum:
      - draft
      - approved
      - received
      - processed
      - rejected
    ScanBarcodeRequest:
      type: object
      description: Request to scan barcode for reconciliation counting
      required:
      - barcode
      - quantity
      properties:
        barcode:
          type: string
          description: Scanned barcode value
        location_id:
          type:
          - string
          - 'null'
          format: uuid
          description: Optional location override (if different from item location)
        notes:
          type:
          - string
          - 'null'
          description: Optional notes for this scan
        quantity:
          type: integer
          format: int64
          description: Counted quantity for this barcode
    ScanBarcodeResponse:
      type: object
      description: Response for barcode scan
      required:
      - item
      - is_new_count
      properties:
        is_new_count:
          type: boolean
          description: Whether this was a new count or update
        item:
          $ref: '#/components/schemas/StockReconciliationItem'
          description: The updated reconciliation item
    SetStandardCostPayload:
      type: object
      required:
      - standard_cost
      properties:
        standard_cost:
          type: integer
          format: int64
    SetValuationMethodPayload:
      type: object
      required:
      - valuation_method
      properties:
        valuation_method:
          $ref: '#/components/schemas/ValuationMethod'
    StockAdjustment:
      type: object
      description: Stock adjustment generated from stock take discrepancies
      required:
      - adjustment_id
      - product_id
      - warehouse_id
      - quantity
      - reason
      - adjusted_at
      properties:
        adjusted_at:
          type: string
          format: date-time
          description: Adjustment timestamp
        adjustment_id:
          type: string
          format: uuid
          description: Adjustment ID
        product_id:
          type: string
          format: uuid
          description: Product adjusted
        quantity:
          type: integer
          format: int64
          description: Adjustment quantity (positive or negative)
        reason:
          type: string
          description: Reason
        warehouse_id:
          type: string
          format: uuid
          description: Warehouse
    StockAgingEntry:
      type: object
      required:
      - product_id
      - product_name
      - current_stock
      - aging_bucket
      properties:
        aging_bucket:
          type: string
          description: Aging bucket (e.g., "0-30 days", "31-60 days", etc.)
        current_stock:
          type: integer
          format: int64
          description: Current stock quantity
        days_since_last_inbound:
          type:
          - number
          - 'null'
          format: double
          description: Days since last inbound movement
        product_id:
          type: string
          format: uuid
          description: Product ID
        product_name:
          type: string
          description: Product name
        warehouse_id:
          type:
          - string
          - 'null'
          format: uuid
          description: Warehouse ID
        warehouse_name:
          type:
          - string
          - 'null'
          description: Warehouse name
    StockAgingQuery:
      type: object
      properties:
        warehouse_id:
          type:
          - string
          - 'null'
          format: uuid
          description: Warehouse ID to filter by location (optional)
    StockLedgerEntry:
      type: object
      required:
      - move_id
      - move_date
      - reference_type
      - reference_id
      - balance
      properties:
        balance:
          type: integer
          format: int64
          description: Running balance after this movement
        description:
          type:
          - string
          - 'null'
          description: Movement description/reason
        move_date:
          type: string
          format: date-time
          description: Movement date
        move_id:
          type: string
          format: uuid
          description: Movement ID
        quantity_in:
          type:
          - integer
          - 'null'
          format: int64
          description: Quantity in (positive movements)
        quantity_out:
          type:
          - integer
          - 'null'
          format: int64
          description: Quantity out (negative movements)
        reference_id:
          type: string
          format: uuid
          description: Reference document ID
        reference_type:
          type: string
          description: Reference document type
        total_cost:
          type:
          - integer
          - 'null'
          format: int64
          description: Total cost
        unit_cost:
          type:
          - integer
          - 'null'
          format: int64
          description: Unit cost
    StockLedgerQuery:
      type: object
      required:
      - product_id
      properties:
        date_from:
          type:
          - string
          - 'null'
          format: date-time
          description: Start date for filtering (optional)
        date_to:
          type:
          - string
          - 'null'
          format: date-time
          description: End date for filtering (optional)
        product_id:
          type: string
          format: uuid
          description: Product ID to filter the ledger (required)
        warehouse_id:
          type:
          - string
          - 'null'
          format: uuid
          description: Warehouse ID to filter by location (optional)
    StockMove:
      type: object
      required:
      - move_id
      - tenant_id
      - product_id
      - move_type
      - quantity
      - reference_type
      - reference_id
      - idempotency_key
      - move_date
      - created_at
      properties:
        batch_info: {}
        created_at:
          type: string
          format: date-time
        destination_location_id:
          type:
          - string
          - 'null'
          format: uuid
        idempotency_key:
          type: string
        lot_serial_id:
          type:
          - string
          - 'null'
          format: uuid
        metadata: {}
        move_date:
          type: string
          format: date-time
        move_id:
          type: string
          format: uuid
        move_reason:
          type:
          - string
          - 'null'
        move_type:
          type: string
        product_id:
          type: string
          format: uuid
        quantity:
          type: integer
          format: int64
        reference_id:
          type: string
          format: uuid
        reference_type:
          type: string
        source_location_id:
          type:
          - string
          - 'null'
          format: uuid
        tenant_id:
          type: string
          format: uuid
        total_cost:
          type:
          - integer
          - 'null'
          format: int64
        unit_cost:
          type:
          - integer
          - 'null'
          format: int64
    StockReconciliation:
      type: object
      description: Represents a stock reconciliation session
      required:
      - reconciliation_id
      - tenant_id
      - reconciliation_number
      - name
      - status
      - cycle_type
      - total_items
      - counted_items
      - total_variance
      - created_by
      - created_at
      - updated_at
      properties:
        approved_at:
          type:
          - string
          - 'null'
          format: date-time
          description: When reconciliation was approved
        approved_by:
          type:
          - string
          - 'null'
          format: uuid
          description: User who approved the reconciliation
        completed_at:
          type:
          - string
          - 'null'
          format: date-time
          description: When reconciliation was completed
        counted_items:
          type: integer
          format: int32
          description: Number of items counted
        created_at:
          type: string
          format: date-time
          description: When reconciliation was created
        created_by:
          type: string
          format: uuid
          description: User who created the reconciliation
        cycle_type:
          $ref: '#/components/schemas/CycleType'
          description: Cycle counting type
        description:
          type:
          - string
          - 'null'
          description: Optional description
        location_filter:
          description: Location filter for location-based reconciliation
        name:
          type: string
          description: Reconciliation name
        notes:
          type:
          - string
          - 'null'
          description: Additional notes
        product_filter:
          description: Product filter for category/ABC-based reconciliation
        reconciliation_id:
          type: string
          format: uuid
          description: Primary key
        reconciliation_number:
          type: string
          description: Auto-generated reconciliation number
        started_at:
          type:
          - string
          - 'null'
          format: date-time
          description: When counting started
        status:
          $ref: '#/components/schemas/ReconciliationStatus'
          description: Reconciliation status
        tenant_id:
          type: string
          format: uuid
          description: Tenant isolation
        total_items:
          type: integer
          format: int32
          description: Total items in this reconciliation
        total_variance:
          type: integer
          format: int64
          description: Total variance across all items
        updated_at:
          type: string
          format: date-time
          description: When reconciliation was last updated
        warehouse_id:
          type:
          - string
          - 'null'
          format: uuid
          description: Warehouse being reconciled (optional for full reconciliation)
    StockReconciliationItem:
      type: object
      description: Represents an item in a stock reconciliation
      required:
      - tenant_id
      - reconciliation_id
      - product_id
      - warehouse_id
      - expected_quantity
      - created_at
      - updated_at
      properties:
        counted_at:
          type:
          - string
          - 'null'
          format: date-time
          description: When the count was performed
        counted_by:
          type:
          - string
          - 'null'
          format: uuid
          description: User who performed the count
        counted_quantity:
          type:
          - integer
          - 'null'
          format: int64
          description: Actual counted quantity
        created_at:
          type: string
          format: date-time
          description: When this item was created
        expected_quantity:
          type: integer
          format: int64
          description: Expected quantity from system
        location_id:
          type:
          - string
          - 'null'
          format: uuid
          description: Specific location within warehouse
        notes:
          type:
          - string
          - 'null'
          description: Notes for this item
        product_id:
          type: string
          format: uuid
          description: Product being reconciled
        reconciliation_id:
          type: string
          format: uuid
          description: Parent reconciliation
        tenant_id:
          type: string
          format: uuid
          description: Tenant isolation
        unit_cost:
          type:
          - number
          - 'null'
          format: double
          description: Unit cost for valuation
        updated_at:
          type: string
          format: date-time
          description: When this item was last updated
        variance:
          type:
          - integer
          - 'null'
          format: int64
          description: Variance (counted - expected)
        variance_percentage:
          type:
          - number
          - 'null'
          format: double
          description: Variance percentage
        variance_value:
          type:
          - number
          - 'null'
          format: double
          description: Variance value (variance * unit_cost)
        warehouse_id:
          type: string
          format: uuid
          description: Warehouse
    TransferPriority:
      type: string
      description: Transfer priority enumeration
      enum:
      - low
      - normal
      - high
      - urgent
    TransferStatus:
      type: string
      description: Transfer status enumeration
      enum:
      - draft
      - confirmed
      - partially_picked
      - picked
      - partially_shipped
      - shipped
      - received
      - cancelled
    TransferType:
      type: string
      description: Transfer type enumeration
      enum:
      - manual
      - auto_replenishment
      - emergency
      - consolidation
    UpdatePickingMethodRequest:
      type: object
      description: Request DTO for updating a picking method
      properties:
        config:
          description: Method configuration (JSON)
        description:
          type:
          - string
          - 'null'
          description: Description
        isActive:
          type:
          - boolean
          - 'null'
          description: Whether method is active
        isDefault:
          type:
          - boolean
          - 'null'
          description: Whether this should be the default method
        name:
          type:
          - string
          - 'null'
          description: Method name
    UpdateQualityControlPoint:
      type: object
      properties:
        active:
          type:
          - boolean
          - 'null'
        name:
          type:
          - string
          - 'null'
        product_id:
          type:
          - string
          - 'null'
          format: uuid
        type:
          oneOf:
          - type: 'null'
          - $ref: '#/components/schemas/QcPointType'
        warehouse_id:
          type:
          - string
          - 'null'
          format: uuid
    UpdateReorderRule:
      type: object
      description: DTO for updating a reorder rule
      properties:
        lead_time_days:
          type:
          - integer
          - 'null'
          format: int32
        max_quantity:
          type:
          - integer
          - 'null'
          format: int64
        min_quantity:
          type:
          - integer
          - 'null'
          format: int64
        reorder_point:
          type:
          - integer
          - 'null'
          format: int64
        safety_stock:
          type:
          - integer
          - 'null'
          format: int64
    ValuationDto:
      type: object
      description: Current valuation information for a product
      required:
      - valuation_id
      - tenant_id
      - product_id
      - valuation_method
      - total_quantity
      - total_value
      - last_updated
      properties:
        current_unit_cost:
          type:
          - integer
          - 'null'
          format: int64
        last_updated:
          type: string
          format: date-time
        product_id:
          type: string
          format: uuid
        standard_cost:
          type:
          - integer
          - 'null'
          format: int64
        tenant_id:
          type: string
          format: uuid
        total_quantity:
          type: integer
          format: int64
        total_value:
          type: integer
          format: int64
        valuation_id:
          type: string
          format: uuid
        valuation_method:
          $ref: '#/components/schemas/ValuationMethod'
    ValuationHistoryDto:
      type: object
      description: Historical valuation record
      required:
      - history_id
      - valuation_id
      - tenant_id
      - product_id
      - valuation_method
      - total_quantity
      - total_value
      - changed_at
      properties:
        change_reason:
          type:
          - string
          - 'null'
        changed_at:
          type: string
          format: date-time
        history_id:
          type: string
          format: uuid
        product_id:
          type: string
          format: uuid
        standard_cost:
          type:
          - integer
          - 'null'
          format: int64
        tenant_id:
          type: string
          format: uuid
        total_quantity:
          type: integer
          format: int64
        total_value:
          type: integer
          format: int64
        unit_cost:
          type:
          - integer
          - 'null'
          format: int64
        valuation_id:
          type: string
          format: uuid
        valuation_method:
          $ref: '#/components/schemas/ValuationMethod'
    ValuationHistoryResponse:
      type: object
      description: Response for valuation history
      required:
      - history
      - total_count
      properties:
        history:
          type: array
          items:
            $ref: '#/components/schemas/ValuationHistoryDto'
        total_count:
          type: integer
          format: int64
    ValuationLayerDto:
      type: object
      description: Cost layer for FIFO valuation
      required:
      - layer_id
      - tenant_id
      - product_id
      - quantity
      - unit_cost
      - total_value
      - created_at
      properties:
        created_at:
          type: string
          format: date-time
        layer_id:
          type: string
          format: uuid
        product_id:
          type: string
          format: uuid
        quantity:
          type: integer
          format: int64
        tenant_id:
          type: string
          format: uuid
        total_value:
          type: integer
          format: int64
        unit_cost:
          type: integer
          format: int64
    ValuationLayersResponse:
      type: object
      description: Response for valuation layers
      required:
      - layers
      properties:
        layers:
          type: array
          items:
            $ref: '#/components/schemas/ValuationLayerDto'
    ValuationMethod:
      type: string
      description: Supported inventory valuation methods
      enum:
      - fifo
      - avco
      - standard
    VarianceAnalysisResponse:
      type: object
      description: Variance analysis for a specific reconciliation
      required:
      - reconciliation
      - variance_ranges
      - top_variance_items
      properties:
        reconciliation:
          $ref: '#/components/schemas/StockReconciliation'
          description: Reconciliation details
        top_variance_items:
          type: array
          items:
            $ref: '#/components/schemas/StockReconciliationItem'
          description: Top 10 items with highest variance
        variance_ranges:
          type: array
          items:
            $ref: '#/components/schemas/VarianceRange'
          description: Items grouped by variance range
    VarianceRange:
      type: object
      description: Variance range grouping
      required:
      - range
      - count
      properties:
        count:
          type: integer
          format: int64
          description: Number of items in this range
        range:
          type: string
          description: Range description (e.g., "0-1%", "1-5%", ">5%")
        total_variance_value:
          type:
          - number
          - 'null'
          format: double
          description: Total variance value for items in this range
    WarehouseLocationResponse:
      type: object
      description: Warehouse location response DTO
      required:
      - locationId
      - tenantId
      - warehouseId
      - locationCode
      - locationType
      - isActive
      - createdAt
      - updatedAt
      properties:
        capacityInfo:
          description: Capacity and attributes
        coordinates:
          description: Physical properties
        createdAt:
          type: string
          format: date-time
          description: Timestamps
        description:
          type:
          - string
          - 'null'
        dimensions: {}
        isActive:
          type: boolean
          description: Status
        locationAttributes: {}
        locationCode:
          type: string
          description: Location identifiers
        locationId:
          type: string
          format: uuid
          description: Location ID
        locationName:
          type:
          - string
          - 'null'
        locationType:
          type: string
          description: Location type
        tenantId:
          type: string
          format: uuid
          description: Tenant ID
        updatedAt:
          type: string
          format: date-time
        warehouseId:
          type: string
          format: uuid
          description: Warehouse and zone IDs
        zoneId:
          type:
          - string
          - 'null'
          format: uuid
    WarehouseResponse:
      type: object
      description: Warehouse response DTO
      required:
      - warehouseId
      - tenantId
      - warehouseCode
      - warehouseName
      - warehouseType
      - isActive
      - createdAt
      - updatedAt
      properties:
        address:
          description: Location and contact info
        capacityInfo:
          description: Capacity info
        contactInfo: {}
        createdAt:
          type: string
          format: date-time
          description: Timestamps
        description:
          type:
          - string
          - 'null'
        isActive:
          type: boolean
          description: Status
        parentWarehouseId:
          type:
          - string
          - 'null'
          format: uuid
          description: Hierarchy
        tenantId:
          type: string
          format: uuid
          description: Tenant ID
        updatedAt:
          type: string
          format: date-time
        warehouseCode:
          type: string
          description: Warehouse identifiers
        warehouseId:
          type: string
          format: uuid
          description: Warehouse ID
        warehouseName:
          type: string
        warehouseType:
          type: string
          description: Warehouse type
    WarehouseZoneResponse:
      type: object
      description: Warehouse zone response DTO
      required:
      - zoneId
      - tenantId
      - warehouseId
      - zoneCode
      - zoneName
      - zoneType
      - isActive
      - createdAt
      - updatedAt
      properties:
        capacityInfo:
          description: Capacity info
        createdAt:
          type: string
          format: date-time
          description: Timestamps
        description:
          type:
          - string
          - 'null'
        isActive:
          type: boolean
          description: Status
        tenantId:
          type: string
          format: uuid
          description: Tenant ID
        updatedAt:
          type: string
          format: date-time
        warehouseId:
          type: string
          format: uuid
          description: Warehouse ID
        zoneAttributes:
          description: Zone properties
        zoneCode:
          type: string
          description: Zone identifiers
        zoneId:
          type: string
          format: uuid
          description: Zone ID
        zoneName:
          type: string
        zoneType:
          type: string
          description: Zone type
tags:
- name: health
  description: Health check endpoints
- name: categories
  description: Category management endpoints
- name: products
  description: Product management endpoints
- name: warehouses
  description: Warehouse management endpoints
- name: receipts
  description: Goods receipt note operations
- name: lot-serial
  description: Lot serial management endpoints
- name: picking
  description: Warehouse picking and optimization operations
- name: putaway
  description: Putaway and storage location operations
- name: quality
  description: Quality control point management
- name: reconciliation
  description: Inventory reconciliation operations
- name: replenishment
  description: Automatic replenishment rules
- name: reports
  description: Inventory reports and analytics
- name: rma
  description: Return merchandise authorization
- name: transfer
  description: Stock transfer operations
- name: valuation
  description: Inventory valuation and costing operations
