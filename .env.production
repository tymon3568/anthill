# Production Environment Configuration for Anthill SaaS
# This file contains production-ready environment variables
# NEVER commit this file to version control - use .env.production.local instead

# Database Configuration
DATABASE_URL=postgres://inventory_user:CHANGE_THIS_PASSWORD@postgres:5432/inventory_saas

# JWT Configuration
JWT_SECRET=CHANGE_THIS_TO_A_STRONG_RANDOM_SECRET_64_CHARS_MINIMUM
JWT_EXPIRATION=900         # 15 minutes in seconds (shorter for security)
JWT_REFRESH_EXPIRATION=604800   # 7 days in seconds

# Server Configuration
HOST=0.0.0.0
PORT=8000
RUST_LOG=warn,anthill=info,axum=warn,sqlx=warn

# Casbin Configuration
CASBIN_MODEL_PATH=./shared/auth/model.conf

# Encryption Keys (for sensitive data like integration credentials)
# Generate with: openssl rand -hex 32
ENCRYPTION_KEY=CHANGE_THIS_TO_A_STRONG_RANDOM_KEY_32_BYTES

# CORS Configuration (comma-separated origins)
CORS_ORIGINS=https://your-app-domain.com,https://admin.your-app-domain.com

# Rate Limiting
RATE_LIMIT_REQUESTS=1000
RATE_LIMIT_WINDOW_SECONDS=60

# Feature Flags
ENABLE_SWAGGER=false
ENABLE_METRICS=true

# KeyDB Configuration (Redis-compatible, multi-threaded cache)
REDIS_URL=redis://keydb:6379
KEYDB_URL=redis://keydb:6379
KEYDB_PASSWORD=CHANGE_THIS_KEYDB_PASSWORD

# NATS Configuration (for event streaming)
NATS_URL=nats://nats:4222

# MinIO Configuration (S3-compatible object storage)
MINIO_ENDPOINT=http://minio:9000
MINIO_ROOT_USER=CHANGE_THIS_ACCESS_KEY
MINIO_ROOT_PASSWORD=CHANGE_THIS_SECRET_KEY
MINIO_BUCKET_NAME=anthill-production-files
MINIO_REGION=us-east-1

# S3 compatibility aliases (uses MinIO credentials)
S3_ENDPOINT=${MINIO_ENDPOINT}
S3_ACCESS_KEY=${MINIO_ROOT_USER}
S3_SECRET_KEY=${MINIO_ROOT_PASSWORD}
S3_BUCKET_NAME=${MINIO_BUCKET_NAME}

# SSL/TLS Configuration (for Nginx)
SSL_CERT_PATH=/etc/letsencrypt/live/your-domain.com/fullchain.pem
SSL_KEY_PATH=/etc/letsencrypt/live/your-domain.com/privkey.pem

# Monitoring Configuration
METRICS_PORT=9090
HEALTH_CHECK_PORT=8080

# Email Configuration (for notifications)
SMTP_HOST=smtp.your-domain.com
SMTP_PORT=587
SMTP_USERNAME=noreply@your-domain.com
SMTP_PASSWORD=CHANGE_THIS_APP_PASSWORD
SMTP_FROM_EMAIL=noreply@your-domain.com
SMTP_FROM_NAME=Anthill
SMTP_TLS=true

# Feature Flags
ENABLE_OAUTH2=true
ENABLE_EMAIL_NOTIFICATIONS=true
ENABLE_FILE_UPLOAD=true

# Security Headers
SECURITY_HEADERS_ENABLED=true
HSTS_MAX_AGE=31536000
CSP_POLICY=default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline'

# Database Connection Pool
DB_MAX_CONNECTIONS=20
DB_MIN_CONNECTIONS=5
DB_CONNECT_TIMEOUT=30
DB_IDLE_TIMEOUT=300

# Cache Configuration
CACHE_TTL=3600
SESSION_TTL=604800

# Backup Configuration
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=30
