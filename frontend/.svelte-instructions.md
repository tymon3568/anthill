# Svelte 5 Development Guidelines

## üö® CRITICAL: Always Use Svelte MCP and Svelte 5 Runes

**ALL Svelte/SvelteKit development MUST follow these rules:**

### üîç **Before Any Svelte Code Changes:**
1. **ALWAYS** call `mcp_svelte_list-sections` first to see available documentation
2. **ALWAYS** call `mcp_svelte_get-documentation` with relevant sections before implementing
3. **NEVER** implement Svelte code without consulting current Svelte 5 documentation

### üèóÔ∏è **Svelte 5 Runes Usage (MANDATORY):**

#### State Management
```typescript
// ‚úÖ CORRECT: Use $state rune
export const userState = $state<User | null>(null);
export const isLoading = $state(false);

// ‚ùå WRONG: Never use legacy stores
// const userStore = writable<User | null>(null);
```

#### Reactive Statements
```svelte
<script>
  let count = $state(0);
  let doubled = $derived(count * 2);

  // ‚úÖ CORRECT: Use $effect for side effects
  $effect(() => {
    console.log('Count changed:', count);
  });

  // ‚ùå WRONG: Never use reactive statements
  // $: console.log('Count changed:', count);
  // $: doubled = count * 2;
</script>
```

#### Component Props
```svelte
<script>
  // ‚úÖ CORRECT: Use $props rune
  let { title, items = $bindable() } = $props<{
    title: string;
    items?: string[];
  }>();

  // ‚ùå WRONG: Never use export let
  // export let title: string;
  // export let items: string[] = [];
</script>
```

#### Template Syntax
```svelte
<!-- ‚úÖ CORRECT: Use {@render ...} -->
{@render children()}

<!-- ‚ùå WRONG: Never use <slot /> -->
<!-- <slot /> -->
```

### üìö **Documentation Lookup Process:**

1. **Identify the task** (e.g., "implement form validation")
2. **Call `mcp_svelte_list-sections`** to see all available docs
3. **Analyze use_cases** to find relevant sections
4. **Call `mcp_svelte_get-documentation`** with ALL relevant sections
5. **Read and understand** the documentation thoroughly
6. **Implement using** the documented patterns

### üîÑ **Migration Checklist:**

When working with existing code:
- [ ] Replace `writable()` stores with `$state`
- [ ] Replace `$store` syntax with direct state access
- [ ] Replace `$:` reactive statements with `$effect` or `$derived`
- [ ] Replace `export let` with `$props`
- [ ] Replace `<slot />` with `{@render children()}`
- [ ] Remove `import { writable } from 'svelte/store'`

### üõ†Ô∏è **Tools to Use:**

- `mcp_svelte_list-sections` - List all available documentation
- `mcp_svelte_get-documentation` - Get specific documentation sections
- `mcp_svelte_svelte-autofixer` - Fix Svelte code issues
- `mcp_svelte_playground-link` - Create playground links for testing

### ‚ö†Ô∏è **Red Flags (DO NOT DO):**

- Using `writable()`, `readable()`, `derived()` from `svelte/store`
- Using `$storeName` syntax in templates
- Using `$:` reactive statements
- Using `export let` for props
- Using `<slot />` in templates
- Implementing without checking documentation first

### üìã **Implementation Steps:**

1. **Read the task** and understand requirements
2. **Call `mcp_svelte_list-sections`** to explore docs
3. **Identify relevant sections** from use_cases
4. **Call `mcp_svelte_get-documentation`** with selected sections
5. **Study the documentation** carefully
6. **Implement using Svelte 5 patterns**
7. **Run `mcp_svelte_svelte-autofixer`** to validate code
8. **Test the implementation**

### üéØ **Quality Assurance:**

After implementation:
- Run `bun run build` to ensure compilation
- Run `bun run lint` for code quality
- Run `bun run test` for functionality
- Use `mcp_svelte_svelte-autofixer` to check for issues

---

**REMEMBER: Svelte 5 runes are the ONLY acceptable way to write Svelte code in this project. Always consult MCP documentation first!**

# Agent & Contributor Instructions ‚Äî Use bun as default

This repository prefers bun for local development, scripting, and package management.
These instructions document the project's preference and provide examples so agents and contributors use a consistent workflow.

Why bun?
- Fast installs and runtime
- Single-tool approach (install, run, scripts)
- Works well with Vite/Svelte projects

Guidelines (always follow when running commands in the repository):

1) Use `bun` to run npm scripts
- Run dev server:

```zsh
bun run dev
```

- Run TypeScript/Svelte checks:

```zsh
bun run check
```

- Run tests (unit / e2e):

```zsh
bun run test:unit
bun run test:e2e
```

2) Use `bun add` to install packages

```zsh
bun add valibot@latest
bun add <package>
```

3) Use `bunx` for CLI binaries when needed

```zsh
bunx playwright test
bunx vitest
```

4) When scripting or running commands from the agent, assume zsh:
- Use absolute paths when required
- Use `bun`/`bunx` instead of `npm`/`npx`/`pnpm`

5) Git and CI
- Commit messages should reference task IDs in `PROJECT_TRACKING` when relevant.
- Example commit message:

```
feat(auth): complete authentication UI [TaskID: 08.02.01]
```

6) Notes for automated agents
- Agents should not change system-level instructions, but they should follow this file when running repo commands.
- If a command would normally use `npm`/`pnpm`, prefer the bun equivalent.
- If using tools unavailable via bun, use `bunx <tool>`.

7) Troubleshooting
- If `bun run` reports "Script not found", inspect `package.json` scripts and use `bunx vite dev` or similar as fallback.

---

This file is informational and intended to align local contributors and automated agents to a common workflow: always use `bun` where possible.
