# Svelte 5 Development Guidelines

## üö® CRITICAL: Always Use Svelte MCP and Svelte 5 Runes

**ALL Svelte/SvelteKit development MUST follow these rules:**

### üîç **Before Any Svelte Code Changes:**
1. **ALWAYS** call `mcp_svelte_list-sections` first to see available documentation
2. **ALWAYS** call `mcp_svelte_get-documentation` with relevant sections before implementing
3. **NEVER** implement Svelte code without consulting current Svelte 5 documentation

### üèóÔ∏è **Svelte 5 Runes Usage (MANDATORY):**

#### State Management
```typescript
// ‚úÖ CORRECT: Use $state rune
export const userState = $state<User | null>(null);
export const isLoading = $state(false);

// ‚ùå WRONG: Never use legacy stores
// const userStore = writable<User | null>(null);
```

#### Reactive Statements
```svelte
<script>
  let count = $state(0);
  let doubled = $derived(count * 2);

  // ‚úÖ CORRECT: Use $effect for side effects
  $effect(() => {
    console.log('Count changed:', count);
  });

  // ‚ùå WRONG: Never use reactive statements
  // $: console.log('Count changed:', count);
  // $: doubled = count * 2;
</script>
```

#### Component Props
```svelte
<script>
  // ‚úÖ CORRECT: Use $props rune
  let { title, items = $bindable() } = $props<{
    title: string;
    items?: string[];
  }>();

  // ‚ùå WRONG: Never use export let
  // export let title: string;
  // export let items: string[] = [];
</script>
```

#### Template Syntax
```svelte
<!-- ‚úÖ CORRECT: Use {@render ...} -->
{@render children()}

<!-- ‚ùå WRONG: Never use <slot /> -->
<!-- <slot /> -->
```

### üìö **Documentation Lookup Process:**

1. **Identify the task** (e.g., "implement form validation")
2. **Call `mcp_svelte_list-sections`** to see all available docs
3. **Analyze use_cases** to find relevant sections
4. **Call `mcp_svelte_get-documentation`** with ALL relevant sections
5. **Read and understand** the documentation thoroughly
6. **Implement using** the documented patterns

### üîÑ **Migration Checklist:**

When working with existing code:
- [ ] Replace `writable()` stores with `$state`
- [ ] Replace `$store` syntax with direct state access
- [ ] Replace `$:` reactive statements with `$effect` or `$derived`
- [ ] Replace `export let` with `$props`
- [ ] Replace `<slot />` with `{@render children()}`
- [ ] Remove `import { writable } from 'svelte/store'`

### üõ†Ô∏è **Tools to Use:**

- `mcp_svelte_list-sections` - List all available documentation
- `mcp_svelte_get-documentation` - Get specific documentation sections
- `mcp_svelte_svelte-autofixer` - Fix Svelte code issues
- `mcp_svelte_playground-link` - Create playground links for testing

### ‚ö†Ô∏è **Red Flags (DO NOT DO):**

- Using `writable()`, `readable()`, `derived()` from `svelte/store`
- Using `$storeName` syntax in templates
- Using `$:` reactive statements
- Using `export let` for props
- Using `<slot />` in templates
- Implementing without checking documentation first

### üìã **Implementation Steps:**

1. **Read the task** and understand requirements
2. **Call `mcp_svelte_list-sections`** to explore docs
3. **Identify relevant sections** from use_cases
4. **Call `mcp_svelte_get-documentation`** with selected sections
5. **Study the documentation** carefully
6. **Implement using Svelte 5 patterns**
7. **Run `mcp_svelte_svelte-autofixer`** to validate code
8. **Test the implementation**

### üéØ **Quality Assurance:**

After implementation:
- Run `bun run build` to ensure compilation
- Run `bun run lint` for code quality
- Run `bun run test` for functionality
- Use `mcp_svelte_svelte-autofixer` to check for issues

---

# üé® UI Design Guidelines - Frappe UI Style

## **MANDATORY: All shadcn-svelte components MUST follow Frappe UI design principles**

### **Frappe UI Philosophy:**
Frappe UI emphasizes **clean, minimal, professional** design with:
- ‚úÖ **Minimal shadows** - Remove most shadow effects for cleaner look
- ‚úÖ **Simple rounded corners** - Use `rounded` or `rounded-lg`, avoid `rounded-xl`
- ‚úÖ **Gray-based color scheme** - Prefer simple grays over complex color systems
- ‚úÖ **Clean focus states** - Simple border changes, no complex rings
- ‚úÖ **Compact spacing** - Reduce padding and margins for tighter layouts

### **Component Styling Rules:**

#### **Buttons:**
```typescript
// ‚úÖ CORRECT: Frappe UI style
buttonVariants = tv({
  base: "inline-flex shrink-0 items-center justify-center gap-2 whitespace-nowrap text-sm font-medium outline-none transition-colors disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&_svg:not([class*='size-'])]:size-4 [&_svg]:pointer-events-none [&_svg]:shrink-0 border border-transparent focus-visible:border-gray-300 focus-visible:outline-none",
  variants: {
    variant: {
      default: 'bg-gray-900 text-white hover:bg-gray-800',
      destructive: 'bg-red-600 text-white hover:bg-red-700',
      outline: 'border-gray-300 bg-white text-gray-700 hover:bg-gray-50',
      secondary: 'bg-gray-100 text-gray-900 hover:bg-gray-200',
      ghost: 'text-gray-700 hover:bg-gray-100',
      link: 'text-blue-600 underline-offset-4 hover:underline'
    },
    size: {
      default: 'h-8 px-3 py-1.5',
      sm: 'h-7 gap-1.5 px-2.5 py-1 text-xs',
      lg: 'h-9 px-4 py-2 text-base',
      icon: 'size-8',
      'icon-sm': 'size-7',
      'icon-lg': 'size-9'
    }
  }
});

// ‚ùå WRONG: Avoid shadcn default style
// shadow-xs, rounded-md, complex focus rings, OKLCH colors
```

#### **Inputs:**
```typescript
// ‚úÖ CORRECT: Frappe UI style
class={cn(
  'flex h-8 w-full min-w-0 rounded border border-gray-300 bg-white px-3 py-1.5 text-sm outline-none placeholder:text-gray-500 disabled:cursor-not-allowed disabled:opacity-50',
  'focus:border-gray-500 focus:outline-none',
  'aria-invalid:border-red-500',
  className
)}

// ‚ùå WRONG: Avoid complex styling
// shadow-xs, complex ring system, OKLCH colors
```

#### **Cards:**
```typescript
// ‚úÖ CORRECT: Frappe UI style
class={cn(
  'flex flex-col gap-4 rounded-lg border border-gray-200 bg-white p-4 text-gray-900',
  className
)}

// ‚ùå WRONG: Avoid heavy styling
// rounded-xl, shadow-sm, complex spacing
```

#### **CSS Variables:**
```css
/* ‚úÖ CORRECT: Simple hex colors */
:root {
  --radius: 0.375rem;
  --background: #ffffff;
  --foreground: #1f2937;
  --primary: #1f2937;
  --border: #e5e7eb;
  --destructive: #dc2626;
}

/* ‚ùå WRONG: Avoid complex color systems */
/* OKLCH colors, large radius (0.625rem) */
```

### **Design Research Process:**

1. **Study Frappe UI** - Use Context7 to research `/frappe/frappe-ui` documentation
2. **Analyze components** - Compare with current shadcn-svelte implementations
3. **Apply minimal changes** - Focus on removing complexity, not adding features
4. **Test consistency** - Ensure all components follow the same design language

### **Tools for UI Research:**

- **Context7**: `resolve-library-id` and `get-library-docs` for Frappe UI research
- **Frappe UI Website**: https://ui.frappe.io/ for visual reference
- **Component Comparison**: Side-by-side testing of old vs new styles

### **Quality Checklist:**

- [ ] All shadows removed or minimized
- [ ] Rounded corners consistent (rounded-lg max)
- [ ] Color scheme uses simple grays
- [ ] Focus states are clean and minimal
- [ ] Spacing is compact and consistent
- [ ] Components look professional and clean

### **Migration Steps:**

1. **Update CSS variables** - Replace OKLCH with hex colors, reduce radius
2. **Modify button variants** - Remove shadows, simplify colors, reduce padding
3. **Update input styling** - Remove shadows, simplify focus states
4. **Simplify card design** - Remove shadows, reduce rounded corners
5. **Update dialog/modal** - Remove shadows, use minimal styling
6. **Test all components** - Ensure consistency across the application

---

**REMEMBER: Svelte 5 runes are the ONLY acceptable way to write Svelte code in this project. Always consult MCP documentation first!**

# Agent & Contributor Instructions ‚Äî Use bun as default

This repository prefers bun for local development, scripting, and package management.
These instructions document the project's preference and provide examples so agents and contributors use a consistent workflow.

Why bun?
- Fast installs and runtime
- Single-tool approach (install, run, scripts)
- Works well with Vite/Svelte projects

Guidelines (always follow when running commands in the repository):

1) Use `bun` to run npm scripts
- Run dev server:

```zsh
bun run dev
```

- Run TypeScript/Svelte checks:

```zsh
bun run check
```

- Run tests (unit / e2e):

```zsh
bun run test:unit
bun run test:e2e
```

2) Use `bun add` to install packages

```zsh
bun add valibot@latest
bun add <package>
```

3) Use `bunx` for CLI binaries when needed

```zsh
bunx playwright test
bunx vitest
```

4) When scripting or running commands from the agent, assume zsh:
- Use absolute paths when required
- Use `bun`/`bunx` instead of `npm`/`npx`/`pnpm`

5) Git and CI
- Commit messages should reference task IDs in `PROJECT_TRACKING` when relevant.
- Example commit message:

```
feat(auth): complete authentication UI [TaskID: 08.02.01]
```

6) Notes for automated agents
- Agents should not change system-level instructions, but they should follow this file when running repo commands.
- If a command would normally use `npm`/`pnpm`, prefer the bun equivalent.
- If using tools unavailable via bun, use `bunx <tool>`.

7) Troubleshooting
- If `bun run` reports "Script not found", inspect `package.json` scripts and use `bunx vite dev` or similar as fallback.

---

This file is informational and intended to align local contributors and automated agents to a common workflow: always use `bun` where possible.
